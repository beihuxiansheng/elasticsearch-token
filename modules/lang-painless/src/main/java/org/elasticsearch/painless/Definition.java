begin_unit|revision:0.9.5;language:Java;cregit-version:0.0.1
begin_comment
comment|/*  * Licensed to Elasticsearch under one or more contributor  * license agreements. See the NOTICE file distributed with  * this work for additional information regarding copyright  * ownership. Elasticsearch licenses this file to you under  * the Apache License, Version 2.0 (the "License"); you may  * not use this file except in compliance with the License.  * You may obtain a copy of the License at  *  *    http://www.apache.org/licenses/LICENSE-2.0  *  * Unless required by applicable law or agreed to in writing,  * software distributed under the License is distributed on an  * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY  * KIND, either express or implied.  See the License for the  * specific language governing permissions and limitations  * under the License.  */
end_comment

begin_package
DECL|package|org.elasticsearch.painless
package|package
name|org
operator|.
name|elasticsearch
operator|.
name|painless
package|;
end_package

begin_import
import|import
name|java
operator|.
name|io
operator|.
name|InputStream
import|;
end_import

begin_import
import|import
name|java
operator|.
name|io
operator|.
name|InputStreamReader
import|;
end_import

begin_import
import|import
name|java
operator|.
name|io
operator|.
name|LineNumberReader
import|;
end_import

begin_import
import|import
name|java
operator|.
name|lang
operator|.
name|invoke
operator|.
name|MethodHandle
import|;
end_import

begin_import
import|import
name|java
operator|.
name|lang
operator|.
name|invoke
operator|.
name|MethodHandles
import|;
end_import

begin_import
import|import
name|java
operator|.
name|nio
operator|.
name|charset
operator|.
name|StandardCharsets
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Arrays
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Collections
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|HashMap
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|List
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Map
import|;
end_import

begin_import
import|import
name|java
operator|.
name|util
operator|.
name|Objects
import|;
end_import

begin_comment
comment|/**  * The entire API for Painless.  Also used as a whitelist for checking for legal  * methods and fields during at both compile-time and runtime.  */
end_comment

begin_class
DECL|class|Definition
specifier|public
specifier|final
class|class
name|Definition
block|{
DECL|field|DEFINITION_FILE
specifier|private
specifier|static
specifier|final
name|String
name|DEFINITION_FILE
init|=
literal|"definition.txt"
decl_stmt|;
comment|// The second construction is used to finalize all the variables, so there is no mistake of modification afterwards.
DECL|field|INSTANCE
specifier|private
specifier|static
specifier|final
name|Definition
name|INSTANCE
init|=
operator|new
name|Definition
argument_list|(
operator|new
name|Definition
argument_list|()
argument_list|)
decl_stmt|;
comment|/** Some native types as constants: */
DECL|field|voidType
specifier|public
specifier|static
specifier|final
name|Type
name|voidType
init|=
name|getType
argument_list|(
literal|"void"
argument_list|)
decl_stmt|;
DECL|field|booleanType
specifier|public
specifier|static
specifier|final
name|Type
name|booleanType
init|=
name|getType
argument_list|(
literal|"boolean"
argument_list|)
decl_stmt|;
DECL|field|booleanobjType
specifier|public
specifier|static
specifier|final
name|Type
name|booleanobjType
init|=
name|getType
argument_list|(
literal|"Boolean"
argument_list|)
decl_stmt|;
DECL|field|byteType
specifier|public
specifier|static
specifier|final
name|Type
name|byteType
init|=
name|getType
argument_list|(
literal|"byte"
argument_list|)
decl_stmt|;
DECL|field|byteobjType
specifier|public
specifier|static
specifier|final
name|Type
name|byteobjType
init|=
name|getType
argument_list|(
literal|"Byte"
argument_list|)
decl_stmt|;
DECL|field|shortType
specifier|public
specifier|static
specifier|final
name|Type
name|shortType
init|=
name|getType
argument_list|(
literal|"short"
argument_list|)
decl_stmt|;
DECL|field|shortobjType
specifier|public
specifier|static
specifier|final
name|Type
name|shortobjType
init|=
name|getType
argument_list|(
literal|"Short"
argument_list|)
decl_stmt|;
DECL|field|intType
specifier|public
specifier|static
specifier|final
name|Type
name|intType
init|=
name|getType
argument_list|(
literal|"int"
argument_list|)
decl_stmt|;
DECL|field|intobjType
specifier|public
specifier|static
specifier|final
name|Type
name|intobjType
init|=
name|getType
argument_list|(
literal|"Integer"
argument_list|)
decl_stmt|;
DECL|field|longType
specifier|public
specifier|static
specifier|final
name|Type
name|longType
init|=
name|getType
argument_list|(
literal|"long"
argument_list|)
decl_stmt|;
DECL|field|longobjType
specifier|public
specifier|static
specifier|final
name|Type
name|longobjType
init|=
name|getType
argument_list|(
literal|"Long"
argument_list|)
decl_stmt|;
DECL|field|floatType
specifier|public
specifier|static
specifier|final
name|Type
name|floatType
init|=
name|getType
argument_list|(
literal|"float"
argument_list|)
decl_stmt|;
DECL|field|floatobjType
specifier|public
specifier|static
specifier|final
name|Type
name|floatobjType
init|=
name|getType
argument_list|(
literal|"Float"
argument_list|)
decl_stmt|;
DECL|field|doubleType
specifier|public
specifier|static
specifier|final
name|Type
name|doubleType
init|=
name|getType
argument_list|(
literal|"double"
argument_list|)
decl_stmt|;
DECL|field|doubleobjType
specifier|public
specifier|static
specifier|final
name|Type
name|doubleobjType
init|=
name|getType
argument_list|(
literal|"Double"
argument_list|)
decl_stmt|;
DECL|field|charType
specifier|public
specifier|static
specifier|final
name|Type
name|charType
init|=
name|getType
argument_list|(
literal|"char"
argument_list|)
decl_stmt|;
DECL|field|charobjType
specifier|public
specifier|static
specifier|final
name|Type
name|charobjType
init|=
name|getType
argument_list|(
literal|"Character"
argument_list|)
decl_stmt|;
DECL|field|objectType
specifier|public
specifier|static
specifier|final
name|Type
name|objectType
init|=
name|getType
argument_list|(
literal|"Object"
argument_list|)
decl_stmt|;
DECL|field|defType
specifier|public
specifier|static
specifier|final
name|Type
name|defType
init|=
name|getType
argument_list|(
literal|"def"
argument_list|)
decl_stmt|;
DECL|field|defobjType
specifier|public
specifier|static
specifier|final
name|Type
name|defobjType
init|=
name|getType
argument_list|(
literal|"Def"
argument_list|)
decl_stmt|;
DECL|field|stringType
specifier|public
specifier|static
specifier|final
name|Type
name|stringType
init|=
name|getType
argument_list|(
literal|"String"
argument_list|)
decl_stmt|;
DECL|field|exceptionType
specifier|public
specifier|static
specifier|final
name|Type
name|exceptionType
init|=
name|getType
argument_list|(
literal|"Exception"
argument_list|)
decl_stmt|;
DECL|field|utilityType
specifier|public
specifier|static
specifier|final
name|Type
name|utilityType
init|=
name|getType
argument_list|(
literal|"Utility"
argument_list|)
decl_stmt|;
DECL|enum|Sort
specifier|public
enum|enum
name|Sort
block|{
DECL|enum constant|VOID
name|VOID
argument_list|(
name|void
operator|.
name|class
argument_list|,
literal|0
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
block|,
DECL|enum constant|BOOL
name|BOOL
argument_list|(
name|boolean
operator|.
name|class
argument_list|,
literal|1
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
block|,
DECL|enum constant|BYTE
name|BYTE
argument_list|(
name|byte
operator|.
name|class
argument_list|,
literal|1
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
block|,
DECL|enum constant|SHORT
name|SHORT
argument_list|(
name|short
operator|.
name|class
argument_list|,
literal|1
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
block|,
DECL|enum constant|CHAR
name|CHAR
argument_list|(
name|char
operator|.
name|class
argument_list|,
literal|1
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
block|,
DECL|enum constant|INT
name|INT
argument_list|(
name|int
operator|.
name|class
argument_list|,
literal|1
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
block|,
DECL|enum constant|LONG
name|LONG
argument_list|(
name|long
operator|.
name|class
argument_list|,
literal|2
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
block|,
DECL|enum constant|FLOAT
name|FLOAT
argument_list|(
name|float
operator|.
name|class
argument_list|,
literal|1
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
block|,
DECL|enum constant|DOUBLE
name|DOUBLE
argument_list|(
name|double
operator|.
name|class
argument_list|,
literal|2
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
block|,
DECL|enum constant|VOID_OBJ
name|VOID_OBJ
argument_list|(
name|Void
operator|.
name|class
argument_list|,
literal|1
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
block|,
DECL|enum constant|BOOL_OBJ
name|BOOL_OBJ
argument_list|(
name|Boolean
operator|.
name|class
argument_list|,
literal|1
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
block|,
DECL|enum constant|BYTE_OBJ
name|BYTE_OBJ
argument_list|(
name|Byte
operator|.
name|class
argument_list|,
literal|1
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
block|,
DECL|enum constant|SHORT_OBJ
name|SHORT_OBJ
argument_list|(
name|Short
operator|.
name|class
argument_list|,
literal|1
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
block|,
DECL|enum constant|CHAR_OBJ
name|CHAR_OBJ
argument_list|(
name|Character
operator|.
name|class
argument_list|,
literal|1
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
block|,
DECL|enum constant|INT_OBJ
name|INT_OBJ
argument_list|(
name|Integer
operator|.
name|class
argument_list|,
literal|1
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
block|,
DECL|enum constant|LONG_OBJ
name|LONG_OBJ
argument_list|(
name|Long
operator|.
name|class
argument_list|,
literal|1
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
block|,
DECL|enum constant|FLOAT_OBJ
name|FLOAT_OBJ
argument_list|(
name|Float
operator|.
name|class
argument_list|,
literal|1
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
block|,
DECL|enum constant|DOUBLE_OBJ
name|DOUBLE_OBJ
argument_list|(
name|Double
operator|.
name|class
argument_list|,
literal|1
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
block|,
DECL|enum constant|NUMBER
name|NUMBER
argument_list|(
name|Number
operator|.
name|class
argument_list|,
literal|1
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
block|,
DECL|enum constant|STRING
name|STRING
argument_list|(
name|String
operator|.
name|class
argument_list|,
literal|1
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
block|,
DECL|enum constant|OBJECT
name|OBJECT
argument_list|(
literal|null
argument_list|,
literal|1
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
block|,
DECL|enum constant|DEF
name|DEF
argument_list|(
literal|null
argument_list|,
literal|1
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
block|,
DECL|enum constant|ARRAY
name|ARRAY
argument_list|(
literal|null
argument_list|,
literal|1
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
block|;
DECL|field|clazz
specifier|public
specifier|final
name|Class
argument_list|<
name|?
argument_list|>
name|clazz
decl_stmt|;
DECL|field|size
specifier|public
specifier|final
name|int
name|size
decl_stmt|;
DECL|field|primitive
specifier|public
specifier|final
name|boolean
name|primitive
decl_stmt|;
DECL|field|bool
specifier|public
specifier|final
name|boolean
name|bool
decl_stmt|;
DECL|field|numeric
specifier|public
specifier|final
name|boolean
name|numeric
decl_stmt|;
DECL|field|constant
specifier|public
specifier|final
name|boolean
name|constant
decl_stmt|;
DECL|method|Sort
name|Sort
parameter_list|(
specifier|final
name|Class
argument_list|<
name|?
argument_list|>
name|clazz
parameter_list|,
specifier|final
name|int
name|size
parameter_list|,
specifier|final
name|boolean
name|primitive
parameter_list|,
specifier|final
name|boolean
name|bool
parameter_list|,
specifier|final
name|boolean
name|numeric
parameter_list|,
specifier|final
name|boolean
name|constant
parameter_list|)
block|{
name|this
operator|.
name|clazz
operator|=
name|clazz
expr_stmt|;
name|this
operator|.
name|size
operator|=
name|size
expr_stmt|;
name|this
operator|.
name|bool
operator|=
name|bool
expr_stmt|;
name|this
operator|.
name|primitive
operator|=
name|primitive
expr_stmt|;
name|this
operator|.
name|numeric
operator|=
name|numeric
expr_stmt|;
name|this
operator|.
name|constant
operator|=
name|constant
expr_stmt|;
block|}
block|}
DECL|class|Type
specifier|public
specifier|static
specifier|final
class|class
name|Type
block|{
DECL|field|name
specifier|public
specifier|final
name|String
name|name
decl_stmt|;
DECL|field|dimensions
specifier|public
specifier|final
name|int
name|dimensions
decl_stmt|;
DECL|field|struct
specifier|public
specifier|final
name|Struct
name|struct
decl_stmt|;
DECL|field|clazz
specifier|public
specifier|final
name|Class
argument_list|<
name|?
argument_list|>
name|clazz
decl_stmt|;
DECL|field|type
specifier|public
specifier|final
name|org
operator|.
name|objectweb
operator|.
name|asm
operator|.
name|Type
name|type
decl_stmt|;
DECL|field|sort
specifier|public
specifier|final
name|Sort
name|sort
decl_stmt|;
DECL|method|Type
specifier|private
name|Type
parameter_list|(
specifier|final
name|String
name|name
parameter_list|,
specifier|final
name|int
name|dimensions
parameter_list|,
specifier|final
name|Struct
name|struct
parameter_list|,
specifier|final
name|Class
argument_list|<
name|?
argument_list|>
name|clazz
parameter_list|,
specifier|final
name|org
operator|.
name|objectweb
operator|.
name|asm
operator|.
name|Type
name|type
parameter_list|,
specifier|final
name|Sort
name|sort
parameter_list|)
block|{
name|this
operator|.
name|name
operator|=
name|name
expr_stmt|;
name|this
operator|.
name|dimensions
operator|=
name|dimensions
expr_stmt|;
name|this
operator|.
name|struct
operator|=
name|struct
expr_stmt|;
name|this
operator|.
name|clazz
operator|=
name|clazz
expr_stmt|;
name|this
operator|.
name|type
operator|=
name|type
expr_stmt|;
name|this
operator|.
name|sort
operator|=
name|sort
expr_stmt|;
block|}
annotation|@
name|Override
DECL|method|equals
specifier|public
name|boolean
name|equals
parameter_list|(
specifier|final
name|Object
name|object
parameter_list|)
block|{
if|if
condition|(
name|this
operator|==
name|object
condition|)
block|{
return|return
literal|true
return|;
block|}
if|if
condition|(
name|object
operator|==
literal|null
operator|||
name|getClass
argument_list|()
operator|!=
name|object
operator|.
name|getClass
argument_list|()
condition|)
block|{
return|return
literal|false
return|;
block|}
specifier|final
name|Type
name|type
init|=
operator|(
name|Type
operator|)
name|object
decl_stmt|;
return|return
name|this
operator|.
name|type
operator|.
name|equals
argument_list|(
name|type
operator|.
name|type
argument_list|)
operator|&&
name|struct
operator|.
name|equals
argument_list|(
name|type
operator|.
name|struct
argument_list|)
return|;
block|}
annotation|@
name|Override
DECL|method|hashCode
specifier|public
name|int
name|hashCode
parameter_list|()
block|{
name|int
name|result
init|=
name|struct
operator|.
name|hashCode
argument_list|()
decl_stmt|;
name|result
operator|=
literal|31
operator|*
name|result
operator|+
name|type
operator|.
name|hashCode
argument_list|()
expr_stmt|;
return|return
name|result
return|;
block|}
block|}
DECL|class|Constructor
specifier|public
specifier|static
specifier|final
class|class
name|Constructor
block|{
DECL|field|name
specifier|public
specifier|final
name|String
name|name
decl_stmt|;
DECL|field|owner
specifier|public
specifier|final
name|Struct
name|owner
decl_stmt|;
DECL|field|arguments
specifier|public
specifier|final
name|List
argument_list|<
name|Type
argument_list|>
name|arguments
decl_stmt|;
DECL|field|method
specifier|public
specifier|final
name|org
operator|.
name|objectweb
operator|.
name|asm
operator|.
name|commons
operator|.
name|Method
name|method
decl_stmt|;
DECL|field|reflect
specifier|public
specifier|final
name|java
operator|.
name|lang
operator|.
name|reflect
operator|.
name|Constructor
argument_list|<
name|?
argument_list|>
name|reflect
decl_stmt|;
DECL|method|Constructor
specifier|private
name|Constructor
parameter_list|(
specifier|final
name|String
name|name
parameter_list|,
specifier|final
name|Struct
name|owner
parameter_list|,
specifier|final
name|List
argument_list|<
name|Type
argument_list|>
name|arguments
parameter_list|,
specifier|final
name|org
operator|.
name|objectweb
operator|.
name|asm
operator|.
name|commons
operator|.
name|Method
name|method
parameter_list|,
specifier|final
name|java
operator|.
name|lang
operator|.
name|reflect
operator|.
name|Constructor
argument_list|<
name|?
argument_list|>
name|reflect
parameter_list|)
block|{
name|this
operator|.
name|name
operator|=
name|name
expr_stmt|;
name|this
operator|.
name|owner
operator|=
name|owner
expr_stmt|;
name|this
operator|.
name|arguments
operator|=
name|Collections
operator|.
name|unmodifiableList
argument_list|(
name|arguments
argument_list|)
expr_stmt|;
name|this
operator|.
name|method
operator|=
name|method
expr_stmt|;
name|this
operator|.
name|reflect
operator|=
name|reflect
expr_stmt|;
block|}
block|}
DECL|class|Method
specifier|public
specifier|static
class|class
name|Method
block|{
DECL|field|name
specifier|public
specifier|final
name|String
name|name
decl_stmt|;
DECL|field|owner
specifier|public
specifier|final
name|Struct
name|owner
decl_stmt|;
DECL|field|rtn
specifier|public
specifier|final
name|Type
name|rtn
decl_stmt|;
DECL|field|arguments
specifier|public
specifier|final
name|List
argument_list|<
name|Type
argument_list|>
name|arguments
decl_stmt|;
DECL|field|method
specifier|public
specifier|final
name|org
operator|.
name|objectweb
operator|.
name|asm
operator|.
name|commons
operator|.
name|Method
name|method
decl_stmt|;
DECL|field|reflect
specifier|public
specifier|final
name|java
operator|.
name|lang
operator|.
name|reflect
operator|.
name|Method
name|reflect
decl_stmt|;
DECL|field|handle
specifier|public
specifier|final
name|MethodHandle
name|handle
decl_stmt|;
DECL|method|Method
specifier|private
name|Method
parameter_list|(
specifier|final
name|String
name|name
parameter_list|,
specifier|final
name|Struct
name|owner
parameter_list|,
specifier|final
name|Type
name|rtn
parameter_list|,
specifier|final
name|List
argument_list|<
name|Type
argument_list|>
name|arguments
parameter_list|,
specifier|final
name|org
operator|.
name|objectweb
operator|.
name|asm
operator|.
name|commons
operator|.
name|Method
name|method
parameter_list|,
specifier|final
name|java
operator|.
name|lang
operator|.
name|reflect
operator|.
name|Method
name|reflect
parameter_list|,
specifier|final
name|MethodHandle
name|handle
parameter_list|)
block|{
name|this
operator|.
name|name
operator|=
name|name
expr_stmt|;
name|this
operator|.
name|owner
operator|=
name|owner
expr_stmt|;
name|this
operator|.
name|rtn
operator|=
name|rtn
expr_stmt|;
name|this
operator|.
name|arguments
operator|=
name|Collections
operator|.
name|unmodifiableList
argument_list|(
name|arguments
argument_list|)
expr_stmt|;
name|this
operator|.
name|method
operator|=
name|method
expr_stmt|;
name|this
operator|.
name|reflect
operator|=
name|reflect
expr_stmt|;
name|this
operator|.
name|handle
operator|=
name|handle
expr_stmt|;
block|}
block|}
DECL|class|Field
specifier|public
specifier|static
specifier|final
class|class
name|Field
block|{
DECL|field|name
specifier|public
specifier|final
name|String
name|name
decl_stmt|;
DECL|field|owner
specifier|public
specifier|final
name|Struct
name|owner
decl_stmt|;
DECL|field|type
specifier|public
specifier|final
name|Type
name|type
decl_stmt|;
DECL|field|reflect
specifier|public
specifier|final
name|java
operator|.
name|lang
operator|.
name|reflect
operator|.
name|Field
name|reflect
decl_stmt|;
DECL|field|getter
specifier|public
specifier|final
name|MethodHandle
name|getter
decl_stmt|;
DECL|field|setter
specifier|public
specifier|final
name|MethodHandle
name|setter
decl_stmt|;
DECL|method|Field
specifier|private
name|Field
parameter_list|(
specifier|final
name|String
name|name
parameter_list|,
specifier|final
name|Struct
name|owner
parameter_list|,
specifier|final
name|Type
name|type
parameter_list|,
specifier|final
name|java
operator|.
name|lang
operator|.
name|reflect
operator|.
name|Field
name|reflect
parameter_list|,
specifier|final
name|MethodHandle
name|getter
parameter_list|,
specifier|final
name|MethodHandle
name|setter
parameter_list|)
block|{
name|this
operator|.
name|name
operator|=
name|name
expr_stmt|;
name|this
operator|.
name|owner
operator|=
name|owner
expr_stmt|;
name|this
operator|.
name|type
operator|=
name|type
expr_stmt|;
name|this
operator|.
name|reflect
operator|=
name|reflect
expr_stmt|;
name|this
operator|.
name|getter
operator|=
name|getter
expr_stmt|;
name|this
operator|.
name|setter
operator|=
name|setter
expr_stmt|;
block|}
block|}
comment|// TODO: instead of hashing on this, we could have a 'next' pointer in Method itself, but it would make code more complex
comment|// please do *NOT* under any circumstances change this to be the crappy Tuple from elasticsearch!
comment|/**      * Key for looking up a method.      *<p>      * Methods are keyed on both name and arity, and can be overloaded once per arity.      * This allows signatures such as {@code String.indexOf(String) vs String.indexOf(String, int)}.      *<p>      * It is less flexible than full signature overloading where types can differ too, but      * better than just the name, and overloading types adds complexity to users, too.      */
DECL|class|MethodKey
specifier|public
specifier|static
specifier|final
class|class
name|MethodKey
block|{
DECL|field|name
specifier|public
specifier|final
name|String
name|name
decl_stmt|;
DECL|field|arity
specifier|public
specifier|final
name|int
name|arity
decl_stmt|;
comment|/**          * Create a new lookup key          * @param name name of the method          * @param arity number of parameters          */
DECL|method|MethodKey
specifier|public
name|MethodKey
parameter_list|(
name|String
name|name
parameter_list|,
name|int
name|arity
parameter_list|)
block|{
name|this
operator|.
name|name
operator|=
name|Objects
operator|.
name|requireNonNull
argument_list|(
name|name
argument_list|)
expr_stmt|;
name|this
operator|.
name|arity
operator|=
name|arity
expr_stmt|;
block|}
annotation|@
name|Override
DECL|method|hashCode
specifier|public
name|int
name|hashCode
parameter_list|()
block|{
specifier|final
name|int
name|prime
init|=
literal|31
decl_stmt|;
name|int
name|result
init|=
literal|1
decl_stmt|;
name|result
operator|=
name|prime
operator|*
name|result
operator|+
name|arity
expr_stmt|;
name|result
operator|=
name|prime
operator|*
name|result
operator|+
name|name
operator|.
name|hashCode
argument_list|()
expr_stmt|;
return|return
name|result
return|;
block|}
annotation|@
name|Override
DECL|method|equals
specifier|public
name|boolean
name|equals
parameter_list|(
name|Object
name|obj
parameter_list|)
block|{
if|if
condition|(
name|this
operator|==
name|obj
condition|)
return|return
literal|true
return|;
if|if
condition|(
name|obj
operator|==
literal|null
condition|)
return|return
literal|false
return|;
if|if
condition|(
name|getClass
argument_list|()
operator|!=
name|obj
operator|.
name|getClass
argument_list|()
condition|)
return|return
literal|false
return|;
name|MethodKey
name|other
init|=
operator|(
name|MethodKey
operator|)
name|obj
decl_stmt|;
if|if
condition|(
name|arity
operator|!=
name|other
operator|.
name|arity
condition|)
return|return
literal|false
return|;
if|if
condition|(
operator|!
name|name
operator|.
name|equals
argument_list|(
name|other
operator|.
name|name
argument_list|)
condition|)
return|return
literal|false
return|;
return|return
literal|true
return|;
block|}
annotation|@
name|Override
DECL|method|toString
specifier|public
name|String
name|toString
parameter_list|()
block|{
name|StringBuilder
name|sb
init|=
operator|new
name|StringBuilder
argument_list|()
decl_stmt|;
name|sb
operator|.
name|append
argument_list|(
name|name
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
literal|'/'
argument_list|)
expr_stmt|;
name|sb
operator|.
name|append
argument_list|(
name|arity
argument_list|)
expr_stmt|;
return|return
name|sb
operator|.
name|toString
argument_list|()
return|;
block|}
block|}
DECL|class|Struct
specifier|public
specifier|static
specifier|final
class|class
name|Struct
block|{
DECL|field|name
specifier|public
specifier|final
name|String
name|name
decl_stmt|;
DECL|field|clazz
specifier|public
specifier|final
name|Class
argument_list|<
name|?
argument_list|>
name|clazz
decl_stmt|;
DECL|field|type
specifier|public
specifier|final
name|org
operator|.
name|objectweb
operator|.
name|asm
operator|.
name|Type
name|type
decl_stmt|;
DECL|field|constructors
specifier|public
specifier|final
name|Map
argument_list|<
name|MethodKey
argument_list|,
name|Constructor
argument_list|>
name|constructors
decl_stmt|;
DECL|field|staticMethods
specifier|public
specifier|final
name|Map
argument_list|<
name|MethodKey
argument_list|,
name|Method
argument_list|>
name|staticMethods
decl_stmt|;
DECL|field|methods
specifier|public
specifier|final
name|Map
argument_list|<
name|MethodKey
argument_list|,
name|Method
argument_list|>
name|methods
decl_stmt|;
DECL|field|staticMembers
specifier|public
specifier|final
name|Map
argument_list|<
name|String
argument_list|,
name|Field
argument_list|>
name|staticMembers
decl_stmt|;
DECL|field|members
specifier|public
specifier|final
name|Map
argument_list|<
name|String
argument_list|,
name|Field
argument_list|>
name|members
decl_stmt|;
DECL|method|Struct
specifier|private
name|Struct
parameter_list|(
specifier|final
name|String
name|name
parameter_list|,
specifier|final
name|Class
argument_list|<
name|?
argument_list|>
name|clazz
parameter_list|,
specifier|final
name|org
operator|.
name|objectweb
operator|.
name|asm
operator|.
name|Type
name|type
parameter_list|)
block|{
name|this
operator|.
name|name
operator|=
name|name
expr_stmt|;
name|this
operator|.
name|clazz
operator|=
name|clazz
expr_stmt|;
name|this
operator|.
name|type
operator|=
name|type
expr_stmt|;
name|constructors
operator|=
operator|new
name|HashMap
argument_list|<>
argument_list|()
expr_stmt|;
name|staticMethods
operator|=
operator|new
name|HashMap
argument_list|<>
argument_list|()
expr_stmt|;
name|methods
operator|=
operator|new
name|HashMap
argument_list|<>
argument_list|()
expr_stmt|;
name|staticMembers
operator|=
operator|new
name|HashMap
argument_list|<>
argument_list|()
expr_stmt|;
name|members
operator|=
operator|new
name|HashMap
argument_list|<>
argument_list|()
expr_stmt|;
block|}
DECL|method|Struct
specifier|private
name|Struct
parameter_list|(
specifier|final
name|Struct
name|struct
parameter_list|)
block|{
name|name
operator|=
name|struct
operator|.
name|name
expr_stmt|;
name|clazz
operator|=
name|struct
operator|.
name|clazz
expr_stmt|;
name|type
operator|=
name|struct
operator|.
name|type
expr_stmt|;
name|constructors
operator|=
name|Collections
operator|.
name|unmodifiableMap
argument_list|(
name|struct
operator|.
name|constructors
argument_list|)
expr_stmt|;
name|staticMethods
operator|=
name|Collections
operator|.
name|unmodifiableMap
argument_list|(
name|struct
operator|.
name|staticMethods
argument_list|)
expr_stmt|;
name|methods
operator|=
name|Collections
operator|.
name|unmodifiableMap
argument_list|(
name|struct
operator|.
name|methods
argument_list|)
expr_stmt|;
name|staticMembers
operator|=
name|Collections
operator|.
name|unmodifiableMap
argument_list|(
name|struct
operator|.
name|staticMembers
argument_list|)
expr_stmt|;
name|members
operator|=
name|Collections
operator|.
name|unmodifiableMap
argument_list|(
name|struct
operator|.
name|members
argument_list|)
expr_stmt|;
block|}
annotation|@
name|Override
DECL|method|equals
specifier|public
name|boolean
name|equals
parameter_list|(
name|Object
name|object
parameter_list|)
block|{
if|if
condition|(
name|this
operator|==
name|object
condition|)
block|{
return|return
literal|true
return|;
block|}
if|if
condition|(
name|object
operator|==
literal|null
operator|||
name|getClass
argument_list|()
operator|!=
name|object
operator|.
name|getClass
argument_list|()
condition|)
block|{
return|return
literal|false
return|;
block|}
name|Struct
name|struct
init|=
operator|(
name|Struct
operator|)
name|object
decl_stmt|;
return|return
name|name
operator|.
name|equals
argument_list|(
name|struct
operator|.
name|name
argument_list|)
return|;
block|}
annotation|@
name|Override
DECL|method|hashCode
specifier|public
name|int
name|hashCode
parameter_list|()
block|{
return|return
name|name
operator|.
name|hashCode
argument_list|()
return|;
block|}
block|}
DECL|class|Cast
specifier|public
specifier|static
class|class
name|Cast
block|{
DECL|field|from
specifier|public
specifier|final
name|Type
name|from
decl_stmt|;
DECL|field|to
specifier|public
specifier|final
name|Type
name|to
decl_stmt|;
DECL|field|explicit
specifier|public
specifier|final
name|boolean
name|explicit
decl_stmt|;
DECL|method|Cast
specifier|public
name|Cast
parameter_list|(
specifier|final
name|Type
name|from
parameter_list|,
specifier|final
name|Type
name|to
parameter_list|,
specifier|final
name|boolean
name|explicit
parameter_list|)
block|{
name|this
operator|.
name|from
operator|=
name|from
expr_stmt|;
name|this
operator|.
name|to
operator|=
name|to
expr_stmt|;
name|this
operator|.
name|explicit
operator|=
name|explicit
expr_stmt|;
block|}
annotation|@
name|Override
DECL|method|equals
specifier|public
name|boolean
name|equals
parameter_list|(
specifier|final
name|Object
name|object
parameter_list|)
block|{
if|if
condition|(
name|this
operator|==
name|object
condition|)
block|{
return|return
literal|true
return|;
block|}
if|if
condition|(
name|object
operator|==
literal|null
operator|||
name|getClass
argument_list|()
operator|!=
name|object
operator|.
name|getClass
argument_list|()
condition|)
block|{
return|return
literal|false
return|;
block|}
specifier|final
name|Cast
name|cast
init|=
operator|(
name|Cast
operator|)
name|object
decl_stmt|;
return|return
name|from
operator|.
name|equals
argument_list|(
name|cast
operator|.
name|from
argument_list|)
operator|&&
name|to
operator|.
name|equals
argument_list|(
name|cast
operator|.
name|to
argument_list|)
operator|&&
name|explicit
operator|==
name|cast
operator|.
name|explicit
return|;
block|}
annotation|@
name|Override
DECL|method|hashCode
specifier|public
name|int
name|hashCode
parameter_list|()
block|{
name|int
name|result
init|=
name|from
operator|.
name|hashCode
argument_list|()
decl_stmt|;
name|result
operator|=
literal|31
operator|*
name|result
operator|+
name|to
operator|.
name|hashCode
argument_list|()
expr_stmt|;
name|result
operator|=
literal|31
operator|*
name|result
operator|+
operator|(
name|explicit
condition|?
literal|1
else|:
literal|0
operator|)
expr_stmt|;
return|return
name|result
return|;
block|}
block|}
DECL|class|Transform
specifier|public
specifier|static
specifier|final
class|class
name|Transform
extends|extends
name|Cast
block|{
DECL|field|method
specifier|public
specifier|final
name|Method
name|method
decl_stmt|;
DECL|field|upcast
specifier|public
specifier|final
name|Type
name|upcast
decl_stmt|;
DECL|field|downcast
specifier|public
specifier|final
name|Type
name|downcast
decl_stmt|;
DECL|method|Transform
specifier|public
name|Transform
parameter_list|(
specifier|final
name|Cast
name|cast
parameter_list|,
name|Method
name|method
parameter_list|,
specifier|final
name|Type
name|upcast
parameter_list|,
specifier|final
name|Type
name|downcast
parameter_list|)
block|{
name|super
argument_list|(
name|cast
operator|.
name|from
argument_list|,
name|cast
operator|.
name|to
argument_list|,
name|cast
operator|.
name|explicit
argument_list|)
expr_stmt|;
name|this
operator|.
name|method
operator|=
name|method
expr_stmt|;
name|this
operator|.
name|upcast
operator|=
name|upcast
expr_stmt|;
name|this
operator|.
name|downcast
operator|=
name|downcast
expr_stmt|;
block|}
block|}
DECL|class|RuntimeClass
specifier|public
specifier|static
specifier|final
class|class
name|RuntimeClass
block|{
DECL|field|methods
specifier|public
specifier|final
name|Map
argument_list|<
name|MethodKey
argument_list|,
name|Method
argument_list|>
name|methods
decl_stmt|;
DECL|field|getters
specifier|public
specifier|final
name|Map
argument_list|<
name|String
argument_list|,
name|MethodHandle
argument_list|>
name|getters
decl_stmt|;
DECL|field|setters
specifier|public
specifier|final
name|Map
argument_list|<
name|String
argument_list|,
name|MethodHandle
argument_list|>
name|setters
decl_stmt|;
DECL|method|RuntimeClass
specifier|private
name|RuntimeClass
parameter_list|(
specifier|final
name|Map
argument_list|<
name|MethodKey
argument_list|,
name|Method
argument_list|>
name|methods
parameter_list|,
specifier|final
name|Map
argument_list|<
name|String
argument_list|,
name|MethodHandle
argument_list|>
name|getters
parameter_list|,
specifier|final
name|Map
argument_list|<
name|String
argument_list|,
name|MethodHandle
argument_list|>
name|setters
parameter_list|)
block|{
name|this
operator|.
name|methods
operator|=
name|methods
expr_stmt|;
name|this
operator|.
name|getters
operator|=
name|getters
expr_stmt|;
name|this
operator|.
name|setters
operator|=
name|setters
expr_stmt|;
block|}
block|}
comment|/** Gets the type given by its name */
DECL|method|getType
specifier|public
specifier|static
name|Type
name|getType
parameter_list|(
specifier|final
name|String
name|name
parameter_list|)
block|{
return|return
name|INSTANCE
operator|.
name|getTypeInternal
argument_list|(
name|name
argument_list|)
return|;
block|}
comment|/** Creates an array type from the given Struct. */
DECL|method|getType
specifier|public
specifier|static
name|Type
name|getType
parameter_list|(
specifier|final
name|Struct
name|struct
parameter_list|,
specifier|final
name|int
name|dimensions
parameter_list|)
block|{
return|return
name|INSTANCE
operator|.
name|getTypeInternal
argument_list|(
name|struct
argument_list|,
name|dimensions
argument_list|)
return|;
block|}
DECL|method|getRuntimeClass
specifier|public
specifier|static
name|RuntimeClass
name|getRuntimeClass
parameter_list|(
name|Class
argument_list|<
name|?
argument_list|>
name|clazz
parameter_list|)
block|{
return|return
name|INSTANCE
operator|.
name|runtimeMap
operator|.
name|get
argument_list|(
name|clazz
argument_list|)
return|;
block|}
DECL|method|getTransform
specifier|public
specifier|static
name|Cast
name|getTransform
parameter_list|(
name|Cast
name|cast
parameter_list|)
block|{
return|return
name|INSTANCE
operator|.
name|transformsMap
operator|.
name|get
argument_list|(
name|cast
argument_list|)
return|;
block|}
comment|// INTERNAL IMPLEMENTATION:
DECL|field|transformsMap
specifier|private
specifier|final
name|Map
argument_list|<
name|Cast
argument_list|,
name|Cast
argument_list|>
name|transformsMap
decl_stmt|;
DECL|field|runtimeMap
specifier|private
specifier|final
name|Map
argument_list|<
name|Class
argument_list|<
name|?
argument_list|>
argument_list|,
name|RuntimeClass
argument_list|>
name|runtimeMap
decl_stmt|;
DECL|field|structsMap
specifier|private
specifier|final
name|Map
argument_list|<
name|String
argument_list|,
name|Struct
argument_list|>
name|structsMap
decl_stmt|;
DECL|field|simpleTypesMap
specifier|private
specifier|final
name|Map
argument_list|<
name|String
argument_list|,
name|Type
argument_list|>
name|simpleTypesMap
decl_stmt|;
DECL|method|Definition
specifier|private
name|Definition
parameter_list|()
block|{
name|structsMap
operator|=
operator|new
name|HashMap
argument_list|<>
argument_list|()
expr_stmt|;
name|simpleTypesMap
operator|=
operator|new
name|HashMap
argument_list|<>
argument_list|()
expr_stmt|;
name|transformsMap
operator|=
operator|new
name|HashMap
argument_list|<>
argument_list|()
expr_stmt|;
name|runtimeMap
operator|=
operator|new
name|HashMap
argument_list|<>
argument_list|()
expr_stmt|;
comment|// parse the classes and return hierarchy (map of class name -> superclasses/interfaces)
name|Map
argument_list|<
name|String
argument_list|,
name|List
argument_list|<
name|String
argument_list|>
argument_list|>
name|hierarchy
init|=
name|addStructs
argument_list|()
decl_stmt|;
comment|// add every method for each class
name|addElements
argument_list|()
expr_stmt|;
comment|// apply hierarchy: this means e.g. copying Object's methods into String (thats how subclasses work)
for|for
control|(
name|Map
operator|.
name|Entry
argument_list|<
name|String
argument_list|,
name|List
argument_list|<
name|String
argument_list|>
argument_list|>
name|clazz
range|:
name|hierarchy
operator|.
name|entrySet
argument_list|()
control|)
block|{
name|copyStruct
argument_list|(
name|clazz
operator|.
name|getKey
argument_list|()
argument_list|,
name|clazz
operator|.
name|getValue
argument_list|()
argument_list|)
expr_stmt|;
block|}
name|addTransforms
argument_list|()
expr_stmt|;
comment|// precompute runtime classes
for|for
control|(
name|Struct
name|struct
range|:
name|structsMap
operator|.
name|values
argument_list|()
control|)
block|{
name|addRuntimeClass
argument_list|(
name|struct
argument_list|)
expr_stmt|;
block|}
block|}
DECL|method|Definition
specifier|private
name|Definition
parameter_list|(
specifier|final
name|Definition
name|definition
parameter_list|)
block|{
specifier|final
name|Map
argument_list|<
name|String
argument_list|,
name|Struct
argument_list|>
name|structs
init|=
operator|new
name|HashMap
argument_list|<>
argument_list|()
decl_stmt|;
for|for
control|(
specifier|final
name|Struct
name|struct
range|:
name|definition
operator|.
name|structsMap
operator|.
name|values
argument_list|()
control|)
block|{
name|structs
operator|.
name|put
argument_list|(
name|struct
operator|.
name|name
argument_list|,
operator|new
name|Struct
argument_list|(
name|struct
argument_list|)
argument_list|)
expr_stmt|;
block|}
name|this
operator|.
name|structsMap
operator|=
name|Collections
operator|.
name|unmodifiableMap
argument_list|(
name|structs
argument_list|)
expr_stmt|;
name|this
operator|.
name|transformsMap
operator|=
name|Collections
operator|.
name|unmodifiableMap
argument_list|(
name|definition
operator|.
name|transformsMap
argument_list|)
expr_stmt|;
name|this
operator|.
name|runtimeMap
operator|=
name|Collections
operator|.
name|unmodifiableMap
argument_list|(
name|definition
operator|.
name|runtimeMap
argument_list|)
expr_stmt|;
name|this
operator|.
name|simpleTypesMap
operator|=
name|Collections
operator|.
name|unmodifiableMap
argument_list|(
name|definition
operator|.
name|simpleTypesMap
argument_list|)
expr_stmt|;
block|}
comment|/** adds classes from definition. returns hierarchy */
DECL|method|addStructs
specifier|private
name|Map
argument_list|<
name|String
argument_list|,
name|List
argument_list|<
name|String
argument_list|>
argument_list|>
name|addStructs
parameter_list|()
block|{
specifier|final
name|Map
argument_list|<
name|String
argument_list|,
name|List
argument_list|<
name|String
argument_list|>
argument_list|>
name|hierarchy
init|=
operator|new
name|HashMap
argument_list|<>
argument_list|()
decl_stmt|;
name|int
name|currentLine
init|=
operator|-
literal|1
decl_stmt|;
try|try
block|{
try|try
init|(
name|InputStream
name|stream
init|=
name|Definition
operator|.
name|class
operator|.
name|getResourceAsStream
argument_list|(
name|DEFINITION_FILE
argument_list|)
init|;
name|LineNumberReader
name|reader
operator|=
operator|new
name|LineNumberReader
argument_list|(
operator|new
name|InputStreamReader
argument_list|(
name|stream
argument_list|,
name|StandardCharsets
operator|.
name|UTF_8
argument_list|)
argument_list|)
init|)
block|{
name|String
name|line
init|=
literal|null
decl_stmt|;
while|while
condition|(
operator|(
name|line
operator|=
name|reader
operator|.
name|readLine
argument_list|()
operator|)
operator|!=
literal|null
condition|)
block|{
name|currentLine
operator|=
name|reader
operator|.
name|getLineNumber
argument_list|()
expr_stmt|;
name|line
operator|=
name|line
operator|.
name|trim
argument_list|()
expr_stmt|;
if|if
condition|(
name|line
operator|.
name|length
argument_list|()
operator|==
literal|0
operator|||
name|line
operator|.
name|charAt
argument_list|(
literal|0
argument_list|)
operator|==
literal|'#'
condition|)
block|{
continue|continue;
block|}
if|if
condition|(
name|line
operator|.
name|startsWith
argument_list|(
literal|"class "
argument_list|)
condition|)
block|{
name|String
name|elements
index|[]
init|=
name|line
operator|.
name|split
argument_list|(
literal|"\u0020"
argument_list|)
decl_stmt|;
assert|assert
name|elements
index|[
literal|2
index|]
operator|.
name|equals
argument_list|(
literal|"->"
argument_list|)
assert|;
if|if
condition|(
name|elements
operator|.
name|length
operator|==
literal|7
condition|)
block|{
name|hierarchy
operator|.
name|put
argument_list|(
name|elements
index|[
literal|1
index|]
argument_list|,
name|Arrays
operator|.
name|asList
argument_list|(
name|elements
index|[
literal|5
index|]
operator|.
name|split
argument_list|(
literal|","
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
block|}
else|else
block|{
assert|assert
name|elements
operator|.
name|length
operator|==
literal|5
assert|;
block|}
name|String
name|className
init|=
name|elements
index|[
literal|1
index|]
decl_stmt|;
name|String
name|javaPeer
init|=
name|elements
index|[
literal|3
index|]
decl_stmt|;
specifier|final
name|Class
argument_list|<
name|?
argument_list|>
name|javaClazz
decl_stmt|;
switch|switch
condition|(
name|javaPeer
condition|)
block|{
case|case
literal|"void"
case|:
name|javaClazz
operator|=
name|void
operator|.
name|class
expr_stmt|;
break|break;
case|case
literal|"boolean"
case|:
name|javaClazz
operator|=
name|boolean
operator|.
name|class
expr_stmt|;
break|break;
case|case
literal|"byte"
case|:
name|javaClazz
operator|=
name|byte
operator|.
name|class
expr_stmt|;
break|break;
case|case
literal|"short"
case|:
name|javaClazz
operator|=
name|short
operator|.
name|class
expr_stmt|;
break|break;
case|case
literal|"char"
case|:
name|javaClazz
operator|=
name|char
operator|.
name|class
expr_stmt|;
break|break;
case|case
literal|"int"
case|:
name|javaClazz
operator|=
name|int
operator|.
name|class
expr_stmt|;
break|break;
case|case
literal|"long"
case|:
name|javaClazz
operator|=
name|long
operator|.
name|class
expr_stmt|;
break|break;
case|case
literal|"float"
case|:
name|javaClazz
operator|=
name|float
operator|.
name|class
expr_stmt|;
break|break;
case|case
literal|"double"
case|:
name|javaClazz
operator|=
name|double
operator|.
name|class
expr_stmt|;
break|break;
default|default:
name|javaClazz
operator|=
name|Class
operator|.
name|forName
argument_list|(
name|javaPeer
argument_list|)
expr_stmt|;
break|break;
block|}
name|addStruct
argument_list|(
name|className
argument_list|,
name|javaClazz
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
operator|new
name|RuntimeException
argument_list|(
literal|"syntax error in definition line: "
operator|+
name|currentLine
argument_list|,
name|e
argument_list|)
throw|;
block|}
return|return
name|hierarchy
return|;
block|}
comment|/** adds class methods/fields/ctors */
DECL|method|addElements
specifier|private
name|void
name|addElements
parameter_list|()
block|{
name|int
name|currentLine
init|=
operator|-
literal|1
decl_stmt|;
try|try
block|{
try|try
init|(
name|InputStream
name|stream
init|=
name|Definition
operator|.
name|class
operator|.
name|getResourceAsStream
argument_list|(
name|DEFINITION_FILE
argument_list|)
init|;
name|LineNumberReader
name|reader
operator|=
operator|new
name|LineNumberReader
argument_list|(
operator|new
name|InputStreamReader
argument_list|(
name|stream
argument_list|,
name|StandardCharsets
operator|.
name|UTF_8
argument_list|)
argument_list|)
init|)
block|{
name|String
name|line
init|=
literal|null
decl_stmt|;
name|String
name|currentClass
init|=
literal|null
decl_stmt|;
while|while
condition|(
operator|(
name|line
operator|=
name|reader
operator|.
name|readLine
argument_list|()
operator|)
operator|!=
literal|null
condition|)
block|{
name|currentLine
operator|=
name|reader
operator|.
name|getLineNumber
argument_list|()
expr_stmt|;
name|line
operator|=
name|line
operator|.
name|trim
argument_list|()
expr_stmt|;
if|if
condition|(
name|line
operator|.
name|length
argument_list|()
operator|==
literal|0
operator|||
name|line
operator|.
name|charAt
argument_list|(
literal|0
argument_list|)
operator|==
literal|'#'
condition|)
block|{
continue|continue;
block|}
elseif|else
if|if
condition|(
name|line
operator|.
name|startsWith
argument_list|(
literal|"class "
argument_list|)
condition|)
block|{
assert|assert
name|currentClass
operator|==
literal|null
assert|;
name|currentClass
operator|=
name|line
operator|.
name|split
argument_list|(
literal|"\u0020"
argument_list|)
index|[
literal|1
index|]
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|line
operator|.
name|equals
argument_list|(
literal|"}"
argument_list|)
condition|)
block|{
assert|assert
name|currentClass
operator|!=
literal|null
assert|;
name|currentClass
operator|=
literal|null
expr_stmt|;
block|}
else|else
block|{
assert|assert
name|currentClass
operator|!=
literal|null
assert|;
name|addSignature
argument_list|(
name|currentClass
argument_list|,
name|line
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
catch|catch
parameter_list|(
name|Exception
name|e
parameter_list|)
block|{
throw|throw
operator|new
name|RuntimeException
argument_list|(
literal|"syntax error in definition line: "
operator|+
name|currentLine
argument_list|,
name|e
argument_list|)
throw|;
block|}
block|}
DECL|method|addTransforms
specifier|private
name|void
name|addTransforms
parameter_list|()
block|{
name|Type
name|booleanType
init|=
name|getTypeInternal
argument_list|(
literal|"boolean"
argument_list|)
decl_stmt|;
name|Type
name|objectType
init|=
name|getTypeInternal
argument_list|(
literal|"Object"
argument_list|)
decl_stmt|;
name|Type
name|defType
init|=
name|getTypeInternal
argument_list|(
literal|"def"
argument_list|)
decl_stmt|;
name|Type
name|booleanobjType
init|=
name|getTypeInternal
argument_list|(
literal|"Boolean"
argument_list|)
decl_stmt|;
name|Type
name|byteType
init|=
name|getTypeInternal
argument_list|(
literal|"byte"
argument_list|)
decl_stmt|;
name|Type
name|shortType
init|=
name|getTypeInternal
argument_list|(
literal|"short"
argument_list|)
decl_stmt|;
name|Type
name|intType
init|=
name|getTypeInternal
argument_list|(
literal|"int"
argument_list|)
decl_stmt|;
name|Type
name|charType
init|=
name|getTypeInternal
argument_list|(
literal|"char"
argument_list|)
decl_stmt|;
name|Type
name|longType
init|=
name|getTypeInternal
argument_list|(
literal|"long"
argument_list|)
decl_stmt|;
name|Type
name|floatType
init|=
name|getTypeInternal
argument_list|(
literal|"float"
argument_list|)
decl_stmt|;
name|Type
name|doubleType
init|=
name|getTypeInternal
argument_list|(
literal|"double"
argument_list|)
decl_stmt|;
name|Type
name|numberType
init|=
name|getTypeInternal
argument_list|(
literal|"Number"
argument_list|)
decl_stmt|;
name|Type
name|byteobjType
init|=
name|getTypeInternal
argument_list|(
literal|"Byte"
argument_list|)
decl_stmt|;
name|Type
name|shortobjType
init|=
name|getTypeInternal
argument_list|(
literal|"Short"
argument_list|)
decl_stmt|;
name|Type
name|charobjType
init|=
name|getTypeInternal
argument_list|(
literal|"Character"
argument_list|)
decl_stmt|;
name|Type
name|intobjType
init|=
name|getTypeInternal
argument_list|(
literal|"Integer"
argument_list|)
decl_stmt|;
name|Type
name|longobjType
init|=
name|getTypeInternal
argument_list|(
literal|"Long"
argument_list|)
decl_stmt|;
name|Type
name|floatobjType
init|=
name|getTypeInternal
argument_list|(
literal|"Float"
argument_list|)
decl_stmt|;
name|Type
name|doubleobjType
init|=
name|getTypeInternal
argument_list|(
literal|"Double"
argument_list|)
decl_stmt|;
name|Type
name|stringType
init|=
name|getTypeInternal
argument_list|(
literal|"String"
argument_list|)
decl_stmt|;
name|addTransform
argument_list|(
name|booleanType
argument_list|,
name|objectType
argument_list|,
literal|"Boolean"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|booleanType
argument_list|,
name|defType
argument_list|,
literal|"Boolean"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|booleanType
argument_list|,
name|booleanobjType
argument_list|,
literal|"Boolean"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteType
argument_list|,
name|shortType
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteType
argument_list|,
name|charType
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteType
argument_list|,
name|intType
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteType
argument_list|,
name|longType
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteType
argument_list|,
name|floatType
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteType
argument_list|,
name|doubleType
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteType
argument_list|,
name|objectType
argument_list|,
literal|"Byte"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteType
argument_list|,
name|defType
argument_list|,
literal|"Byte"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteType
argument_list|,
name|numberType
argument_list|,
literal|"Byte"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteType
argument_list|,
name|byteobjType
argument_list|,
literal|"Byte"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteType
argument_list|,
name|shortobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"byteToShort"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteType
argument_list|,
name|charobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"byteToCharacter"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteType
argument_list|,
name|intobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"byteToInteger"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteType
argument_list|,
name|longobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"byteToLong"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteType
argument_list|,
name|floatobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"byteToFloat"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteType
argument_list|,
name|doubleobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"byteToDouble"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortType
argument_list|,
name|byteType
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortType
argument_list|,
name|charType
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortType
argument_list|,
name|intType
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortType
argument_list|,
name|longType
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortType
argument_list|,
name|floatType
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortType
argument_list|,
name|doubleType
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortType
argument_list|,
name|objectType
argument_list|,
literal|"Short"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortType
argument_list|,
name|defType
argument_list|,
literal|"Short"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortType
argument_list|,
name|numberType
argument_list|,
literal|"Short"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortType
argument_list|,
name|byteobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"shortToByte"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortType
argument_list|,
name|shortobjType
argument_list|,
literal|"Short"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortType
argument_list|,
name|charobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"shortToCharacter"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortType
argument_list|,
name|intobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"shortToInteger"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortType
argument_list|,
name|longobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"shortToLong"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortType
argument_list|,
name|floatobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"shortToFloat"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortType
argument_list|,
name|doubleobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"shortToDouble"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charType
argument_list|,
name|byteType
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charType
argument_list|,
name|shortType
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charType
argument_list|,
name|intType
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charType
argument_list|,
name|longType
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charType
argument_list|,
name|floatType
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charType
argument_list|,
name|doubleType
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charType
argument_list|,
name|objectType
argument_list|,
literal|"Character"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charType
argument_list|,
name|defType
argument_list|,
literal|"Character"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charType
argument_list|,
name|numberType
argument_list|,
literal|"Utility"
argument_list|,
literal|"charToInteger"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charType
argument_list|,
name|byteobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"charToByte"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charType
argument_list|,
name|shortobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"charToShort"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charType
argument_list|,
name|charobjType
argument_list|,
literal|"Character"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charType
argument_list|,
name|intobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"charToInteger"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charType
argument_list|,
name|longobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"charToLong"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charType
argument_list|,
name|floatobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"charToFloat"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charType
argument_list|,
name|doubleobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"charToDouble"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charType
argument_list|,
name|stringType
argument_list|,
literal|"Utility"
argument_list|,
literal|"charToString"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intType
argument_list|,
name|byteType
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intType
argument_list|,
name|shortType
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intType
argument_list|,
name|charType
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intType
argument_list|,
name|longType
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intType
argument_list|,
name|floatType
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intType
argument_list|,
name|doubleType
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intType
argument_list|,
name|objectType
argument_list|,
literal|"Integer"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intType
argument_list|,
name|defType
argument_list|,
literal|"Integer"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intType
argument_list|,
name|numberType
argument_list|,
literal|"Integer"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intType
argument_list|,
name|byteobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"intToByte"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intType
argument_list|,
name|shortobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"intToShort"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intType
argument_list|,
name|charobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"intToCharacter"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intType
argument_list|,
name|intobjType
argument_list|,
literal|"Integer"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intType
argument_list|,
name|longobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"intToLong"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intType
argument_list|,
name|floatobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"intToFloat"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intType
argument_list|,
name|doubleobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"intToDouble"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longType
argument_list|,
name|byteType
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longType
argument_list|,
name|shortType
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longType
argument_list|,
name|charType
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longType
argument_list|,
name|intType
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longType
argument_list|,
name|floatType
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longType
argument_list|,
name|doubleType
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longType
argument_list|,
name|objectType
argument_list|,
literal|"Long"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longType
argument_list|,
name|defType
argument_list|,
literal|"Long"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longType
argument_list|,
name|numberType
argument_list|,
literal|"Long"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longType
argument_list|,
name|byteobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"longToByte"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longType
argument_list|,
name|shortobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"longToShort"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longType
argument_list|,
name|charobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"longToCharacter"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longType
argument_list|,
name|intobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"longToInteger"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longType
argument_list|,
name|longobjType
argument_list|,
literal|"Long"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longType
argument_list|,
name|floatobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"longToFloat"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longType
argument_list|,
name|doubleobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"longToDouble"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatType
argument_list|,
name|byteType
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatType
argument_list|,
name|shortType
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatType
argument_list|,
name|charType
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatType
argument_list|,
name|intType
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatType
argument_list|,
name|longType
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatType
argument_list|,
name|doubleType
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatType
argument_list|,
name|objectType
argument_list|,
literal|"Float"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatType
argument_list|,
name|defType
argument_list|,
literal|"Float"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatType
argument_list|,
name|numberType
argument_list|,
literal|"Float"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatType
argument_list|,
name|byteobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"floatToByte"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatType
argument_list|,
name|shortobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"floatToShort"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatType
argument_list|,
name|charobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"floatToCharacter"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatType
argument_list|,
name|intobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"floatToInteger"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatType
argument_list|,
name|longobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"floatToLong"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatType
argument_list|,
name|floatobjType
argument_list|,
literal|"Float"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatType
argument_list|,
name|doubleobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"floatToDouble"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleType
argument_list|,
name|byteType
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleType
argument_list|,
name|shortType
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleType
argument_list|,
name|charType
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleType
argument_list|,
name|intType
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleType
argument_list|,
name|longType
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleType
argument_list|,
name|floatType
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleType
argument_list|,
name|objectType
argument_list|,
literal|"Double"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleType
argument_list|,
name|defType
argument_list|,
literal|"Double"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleType
argument_list|,
name|numberType
argument_list|,
literal|"Double"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleType
argument_list|,
name|byteobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"doubleToByte"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleType
argument_list|,
name|shortobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"doubleToShort"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleType
argument_list|,
name|charobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"doubleToCharacter"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleType
argument_list|,
name|intobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"doubleToInteger"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleType
argument_list|,
name|longobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"doubleToLong"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleType
argument_list|,
name|floatobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"doubleToFloat"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleType
argument_list|,
name|doubleobjType
argument_list|,
literal|"Double"
argument_list|,
literal|"valueOf"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|objectType
argument_list|,
name|booleanType
argument_list|,
literal|"Boolean"
argument_list|,
literal|"booleanValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|objectType
argument_list|,
name|byteType
argument_list|,
literal|"Number"
argument_list|,
literal|"byteValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|objectType
argument_list|,
name|shortType
argument_list|,
literal|"Number"
argument_list|,
literal|"shortValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|objectType
argument_list|,
name|charType
argument_list|,
literal|"Character"
argument_list|,
literal|"charValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|objectType
argument_list|,
name|intType
argument_list|,
literal|"Number"
argument_list|,
literal|"intValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|objectType
argument_list|,
name|longType
argument_list|,
literal|"Number"
argument_list|,
literal|"longValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|objectType
argument_list|,
name|floatType
argument_list|,
literal|"Number"
argument_list|,
literal|"floatValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|objectType
argument_list|,
name|doubleType
argument_list|,
literal|"Number"
argument_list|,
literal|"doubleValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|booleanType
argument_list|,
literal|"Boolean"
argument_list|,
literal|"booleanValue"
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|byteType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefTobyteImplicit"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|shortType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefToshortImplicit"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|charType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefTocharImplicit"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|intType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefTointImplicit"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|longType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefTolongImplicit"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|floatType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefTofloatImplicit"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|doubleType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefTodoubleImplicit"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|byteobjType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefToByteImplicit"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|shortobjType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefToShortImplicit"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|charobjType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefToCharacterImplicit"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|intobjType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefToIntegerImplicit"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|longobjType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefToLongImplicit"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|floatobjType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefToFloatImplicit"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|doubleobjType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefToDoubleImplicit"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|byteType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefTobyteExplicit"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|shortType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefToshortExplicit"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|charType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefTocharExplicit"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|intType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefTointExplicit"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|longType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefTolongExplicit"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|floatType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefTofloatExplicit"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|doubleType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefTodoubleExplicit"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|byteobjType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefToByteExplicit"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|shortobjType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefToShortExplicit"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|charobjType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefToCharacterExplicit"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|intobjType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefToIntegerExplicit"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|longobjType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefToLongExplicit"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|floatobjType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefToFloatExplicit"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|defType
argument_list|,
name|doubleobjType
argument_list|,
literal|"Def"
argument_list|,
literal|"DefToDoubleExplicit"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|numberType
argument_list|,
name|byteType
argument_list|,
literal|"Number"
argument_list|,
literal|"byteValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|numberType
argument_list|,
name|shortType
argument_list|,
literal|"Number"
argument_list|,
literal|"shortValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|numberType
argument_list|,
name|charType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberTochar"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|numberType
argument_list|,
name|intType
argument_list|,
literal|"Number"
argument_list|,
literal|"intValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|numberType
argument_list|,
name|longType
argument_list|,
literal|"Number"
argument_list|,
literal|"longValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|numberType
argument_list|,
name|floatType
argument_list|,
literal|"Number"
argument_list|,
literal|"floatValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|numberType
argument_list|,
name|doubleType
argument_list|,
literal|"Number"
argument_list|,
literal|"doubleValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|numberType
argument_list|,
name|booleanobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToBoolean"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|numberType
argument_list|,
name|byteobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToByte"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|numberType
argument_list|,
name|shortobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToShort"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|numberType
argument_list|,
name|charobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToCharacter"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|numberType
argument_list|,
name|intobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToInteger"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|numberType
argument_list|,
name|longobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToLong"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|numberType
argument_list|,
name|floatobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToFloat"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|numberType
argument_list|,
name|doubleobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToDouble"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|booleanobjType
argument_list|,
name|booleanType
argument_list|,
literal|"Boolean"
argument_list|,
literal|"booleanValue"
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteobjType
argument_list|,
name|byteType
argument_list|,
literal|"Byte"
argument_list|,
literal|"byteValue"
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteobjType
argument_list|,
name|shortType
argument_list|,
literal|"Byte"
argument_list|,
literal|"shortValue"
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteobjType
argument_list|,
name|charType
argument_list|,
literal|"Utility"
argument_list|,
literal|"ByteTochar"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteobjType
argument_list|,
name|intType
argument_list|,
literal|"Byte"
argument_list|,
literal|"intValue"
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteobjType
argument_list|,
name|longType
argument_list|,
literal|"Byte"
argument_list|,
literal|"longValue"
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteobjType
argument_list|,
name|floatType
argument_list|,
literal|"Byte"
argument_list|,
literal|"floatValue"
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteobjType
argument_list|,
name|doubleType
argument_list|,
literal|"Byte"
argument_list|,
literal|"doubleValue"
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteobjType
argument_list|,
name|shortobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToShort"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteobjType
argument_list|,
name|charobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToCharacter"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteobjType
argument_list|,
name|intobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToInteger"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteobjType
argument_list|,
name|longobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToLong"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteobjType
argument_list|,
name|floatobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToFloat"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|byteobjType
argument_list|,
name|doubleobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToDouble"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortobjType
argument_list|,
name|byteType
argument_list|,
literal|"Short"
argument_list|,
literal|"byteValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortobjType
argument_list|,
name|shortType
argument_list|,
literal|"Short"
argument_list|,
literal|"shortValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortobjType
argument_list|,
name|charType
argument_list|,
literal|"Utility"
argument_list|,
literal|"ShortTochar"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortobjType
argument_list|,
name|intType
argument_list|,
literal|"Short"
argument_list|,
literal|"intValue"
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortobjType
argument_list|,
name|longType
argument_list|,
literal|"Short"
argument_list|,
literal|"longValue"
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortobjType
argument_list|,
name|floatType
argument_list|,
literal|"Short"
argument_list|,
literal|"floatValue"
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortobjType
argument_list|,
name|doubleType
argument_list|,
literal|"Short"
argument_list|,
literal|"doubleValue"
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortobjType
argument_list|,
name|byteobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToByte"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortobjType
argument_list|,
name|charobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToCharacter"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortobjType
argument_list|,
name|intobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToInteger"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortobjType
argument_list|,
name|longobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToLong"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortobjType
argument_list|,
name|floatobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToFloat"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|shortobjType
argument_list|,
name|doubleobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToDouble"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charobjType
argument_list|,
name|byteType
argument_list|,
literal|"Utility"
argument_list|,
literal|"CharacterTobyte"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charobjType
argument_list|,
name|shortType
argument_list|,
literal|"Utility"
argument_list|,
literal|"CharacterToshort"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charobjType
argument_list|,
name|charType
argument_list|,
literal|"Character"
argument_list|,
literal|"charValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charobjType
argument_list|,
name|intType
argument_list|,
literal|"Utility"
argument_list|,
literal|"CharacterToint"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charobjType
argument_list|,
name|longType
argument_list|,
literal|"Utility"
argument_list|,
literal|"CharacterTolong"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charobjType
argument_list|,
name|floatType
argument_list|,
literal|"Utility"
argument_list|,
literal|"CharacterTofloat"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charobjType
argument_list|,
name|doubleType
argument_list|,
literal|"Utility"
argument_list|,
literal|"CharacterTodouble"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charobjType
argument_list|,
name|byteobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"CharacterToByte"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charobjType
argument_list|,
name|shortobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"CharacterToShort"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charobjType
argument_list|,
name|intobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"CharacterToInteger"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charobjType
argument_list|,
name|longobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"CharacterToLong"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charobjType
argument_list|,
name|floatobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"CharacterToFloat"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charobjType
argument_list|,
name|doubleobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"CharacterToDouble"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|charobjType
argument_list|,
name|stringType
argument_list|,
literal|"Utility"
argument_list|,
literal|"CharacterToString"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intobjType
argument_list|,
name|byteType
argument_list|,
literal|"Integer"
argument_list|,
literal|"byteValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intobjType
argument_list|,
name|shortType
argument_list|,
literal|"Integer"
argument_list|,
literal|"shortValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intobjType
argument_list|,
name|charType
argument_list|,
literal|"Utility"
argument_list|,
literal|"IntegerTochar"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intobjType
argument_list|,
name|intType
argument_list|,
literal|"Integer"
argument_list|,
literal|"intValue"
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intobjType
argument_list|,
name|longType
argument_list|,
literal|"Integer"
argument_list|,
literal|"longValue"
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intobjType
argument_list|,
name|floatType
argument_list|,
literal|"Integer"
argument_list|,
literal|"floatValue"
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intobjType
argument_list|,
name|doubleType
argument_list|,
literal|"Integer"
argument_list|,
literal|"doubleValue"
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intobjType
argument_list|,
name|byteobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToByte"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intobjType
argument_list|,
name|shortobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToShort"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intobjType
argument_list|,
name|charobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToCharacter"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intobjType
argument_list|,
name|longobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToLong"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intobjType
argument_list|,
name|floatobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToFloat"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|intobjType
argument_list|,
name|doubleobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToDouble"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longobjType
argument_list|,
name|byteType
argument_list|,
literal|"Long"
argument_list|,
literal|"byteValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longobjType
argument_list|,
name|shortType
argument_list|,
literal|"Long"
argument_list|,
literal|"shortValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longobjType
argument_list|,
name|charType
argument_list|,
literal|"Utility"
argument_list|,
literal|"LongTochar"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longobjType
argument_list|,
name|intType
argument_list|,
literal|"Long"
argument_list|,
literal|"intValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longobjType
argument_list|,
name|longType
argument_list|,
literal|"Long"
argument_list|,
literal|"longValue"
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longobjType
argument_list|,
name|floatType
argument_list|,
literal|"Long"
argument_list|,
literal|"floatValue"
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longobjType
argument_list|,
name|doubleType
argument_list|,
literal|"Long"
argument_list|,
literal|"doubleValue"
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longobjType
argument_list|,
name|byteobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToByte"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longobjType
argument_list|,
name|shortobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToShort"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longobjType
argument_list|,
name|charobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToCharacter"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longobjType
argument_list|,
name|intobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToInteger"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longobjType
argument_list|,
name|floatobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToFloat"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|longobjType
argument_list|,
name|doubleobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToDouble"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatobjType
argument_list|,
name|byteType
argument_list|,
literal|"Float"
argument_list|,
literal|"byteValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatobjType
argument_list|,
name|shortType
argument_list|,
literal|"Float"
argument_list|,
literal|"shortValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatobjType
argument_list|,
name|charType
argument_list|,
literal|"Utility"
argument_list|,
literal|"FloatTochar"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatobjType
argument_list|,
name|intType
argument_list|,
literal|"Float"
argument_list|,
literal|"intValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatobjType
argument_list|,
name|longType
argument_list|,
literal|"Float"
argument_list|,
literal|"longValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatobjType
argument_list|,
name|floatType
argument_list|,
literal|"Float"
argument_list|,
literal|"floatValue"
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatobjType
argument_list|,
name|doubleType
argument_list|,
literal|"Float"
argument_list|,
literal|"doubleValue"
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatobjType
argument_list|,
name|byteobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToByte"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatobjType
argument_list|,
name|shortobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToShort"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatobjType
argument_list|,
name|charobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToCharacter"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatobjType
argument_list|,
name|intobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToInteger"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatobjType
argument_list|,
name|longobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToLong"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|floatobjType
argument_list|,
name|doubleobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToDouble"
argument_list|,
literal|true
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleobjType
argument_list|,
name|byteType
argument_list|,
literal|"Double"
argument_list|,
literal|"byteValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleobjType
argument_list|,
name|shortType
argument_list|,
literal|"Double"
argument_list|,
literal|"shortValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleobjType
argument_list|,
name|charType
argument_list|,
literal|"Utility"
argument_list|,
literal|"DoubleTochar"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleobjType
argument_list|,
name|intType
argument_list|,
literal|"Double"
argument_list|,
literal|"intValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleobjType
argument_list|,
name|longType
argument_list|,
literal|"Double"
argument_list|,
literal|"longValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleobjType
argument_list|,
name|floatType
argument_list|,
literal|"Double"
argument_list|,
literal|"floatValue"
argument_list|,
literal|false
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleobjType
argument_list|,
name|doubleType
argument_list|,
literal|"Double"
argument_list|,
literal|"doubleValue"
argument_list|,
literal|false
argument_list|,
literal|false
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleobjType
argument_list|,
name|byteobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToByte"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleobjType
argument_list|,
name|shortobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToShort"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleobjType
argument_list|,
name|charobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToCharacter"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleobjType
argument_list|,
name|intobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToInteger"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleobjType
argument_list|,
name|longobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToLong"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|doubleobjType
argument_list|,
name|floatobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"NumberToFloat"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|stringType
argument_list|,
name|charType
argument_list|,
literal|"Utility"
argument_list|,
literal|"StringTochar"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
name|addTransform
argument_list|(
name|stringType
argument_list|,
name|charobjType
argument_list|,
literal|"Utility"
argument_list|,
literal|"StringToCharacter"
argument_list|,
literal|true
argument_list|,
literal|true
argument_list|)
expr_stmt|;
block|}
DECL|method|addStruct
specifier|private
specifier|final
name|void
name|addStruct
parameter_list|(
specifier|final
name|String
name|name
parameter_list|,
specifier|final
name|Class
argument_list|<
name|?
argument_list|>
name|clazz
parameter_list|)
block|{
if|if
condition|(
operator|!
name|name
operator|.
name|matches
argument_list|(
literal|"^[_a-zA-Z][<>,_a-zA-Z0-9]*$"
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Invalid struct name ["
operator|+
name|name
operator|+
literal|"]."
argument_list|)
throw|;
block|}
if|if
condition|(
name|structsMap
operator|.
name|containsKey
argument_list|(
name|name
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Duplicate struct name ["
operator|+
name|name
operator|+
literal|"]."
argument_list|)
throw|;
block|}
specifier|final
name|Struct
name|struct
init|=
operator|new
name|Struct
argument_list|(
name|name
argument_list|,
name|clazz
argument_list|,
name|org
operator|.
name|objectweb
operator|.
name|asm
operator|.
name|Type
operator|.
name|getType
argument_list|(
name|clazz
argument_list|)
argument_list|)
decl_stmt|;
name|structsMap
operator|.
name|put
argument_list|(
name|name
argument_list|,
name|struct
argument_list|)
expr_stmt|;
name|simpleTypesMap
operator|.
name|put
argument_list|(
name|name
argument_list|,
name|getTypeInternal
argument_list|(
name|name
argument_list|)
argument_list|)
expr_stmt|;
block|}
DECL|method|addConstructorInternal
specifier|private
specifier|final
name|void
name|addConstructorInternal
parameter_list|(
specifier|final
name|String
name|struct
parameter_list|,
specifier|final
name|String
name|name
parameter_list|,
specifier|final
name|Type
index|[]
name|args
parameter_list|)
block|{
specifier|final
name|Struct
name|owner
init|=
name|structsMap
operator|.
name|get
argument_list|(
name|struct
argument_list|)
decl_stmt|;
if|if
condition|(
name|owner
operator|==
literal|null
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Owner struct ["
operator|+
name|struct
operator|+
literal|"] not defined for constructor ["
operator|+
name|name
operator|+
literal|"]."
argument_list|)
throw|;
block|}
if|if
condition|(
operator|!
name|name
operator|.
name|matches
argument_list|(
literal|"^[_a-zA-Z][_a-zA-Z0-9]*$"
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Invalid constructor name ["
operator|+
name|name
operator|+
literal|"] with the struct ["
operator|+
name|owner
operator|.
name|name
operator|+
literal|"]."
argument_list|)
throw|;
block|}
name|MethodKey
name|methodKey
init|=
operator|new
name|MethodKey
argument_list|(
name|name
argument_list|,
name|args
operator|.
name|length
argument_list|)
decl_stmt|;
if|if
condition|(
name|owner
operator|.
name|constructors
operator|.
name|containsKey
argument_list|(
name|methodKey
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Duplicate constructor ["
operator|+
name|methodKey
operator|+
literal|"] found within the struct ["
operator|+
name|owner
operator|.
name|name
operator|+
literal|"]."
argument_list|)
throw|;
block|}
if|if
condition|(
name|owner
operator|.
name|staticMethods
operator|.
name|containsKey
argument_list|(
name|methodKey
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Constructors and static methods may not have the same signature"
operator|+
literal|" ["
operator|+
name|methodKey
operator|+
literal|"] within the same struct ["
operator|+
name|owner
operator|.
name|name
operator|+
literal|"]."
argument_list|)
throw|;
block|}
if|if
condition|(
name|owner
operator|.
name|methods
operator|.
name|containsKey
argument_list|(
name|methodKey
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Constructors and methods may not have the same signature"
operator|+
literal|" ["
operator|+
name|methodKey
operator|+
literal|"] within the same struct ["
operator|+
name|owner
operator|.
name|name
operator|+
literal|"]."
argument_list|)
throw|;
block|}
specifier|final
name|Class
argument_list|<
name|?
argument_list|>
index|[]
name|classes
init|=
operator|new
name|Class
argument_list|<
name|?
argument_list|>
index|[
name|args
operator|.
name|length
index|]
decl_stmt|;
for|for
control|(
name|int
name|count
init|=
literal|0
init|;
name|count
operator|<
name|classes
operator|.
name|length
condition|;
operator|++
name|count
control|)
block|{
name|classes
index|[
name|count
index|]
operator|=
name|args
index|[
name|count
index|]
operator|.
name|clazz
expr_stmt|;
block|}
specifier|final
name|java
operator|.
name|lang
operator|.
name|reflect
operator|.
name|Constructor
argument_list|<
name|?
argument_list|>
name|reflect
decl_stmt|;
try|try
block|{
name|reflect
operator|=
name|owner
operator|.
name|clazz
operator|.
name|getConstructor
argument_list|(
name|classes
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|NoSuchMethodException
name|exception
parameter_list|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Constructor ["
operator|+
name|name
operator|+
literal|"] not found for class"
operator|+
literal|" ["
operator|+
name|owner
operator|.
name|clazz
operator|.
name|getName
argument_list|()
operator|+
literal|"] with arguments "
operator|+
name|Arrays
operator|.
name|toString
argument_list|(
name|classes
argument_list|)
operator|+
literal|"."
argument_list|)
throw|;
block|}
specifier|final
name|org
operator|.
name|objectweb
operator|.
name|asm
operator|.
name|commons
operator|.
name|Method
name|asm
init|=
name|org
operator|.
name|objectweb
operator|.
name|asm
operator|.
name|commons
operator|.
name|Method
operator|.
name|getMethod
argument_list|(
name|reflect
argument_list|)
decl_stmt|;
specifier|final
name|Constructor
name|constructor
init|=
operator|new
name|Constructor
argument_list|(
name|name
argument_list|,
name|owner
argument_list|,
name|Arrays
operator|.
name|asList
argument_list|(
name|args
argument_list|)
argument_list|,
name|asm
argument_list|,
name|reflect
argument_list|)
decl_stmt|;
name|owner
operator|.
name|constructors
operator|.
name|put
argument_list|(
name|methodKey
argument_list|,
name|constructor
argument_list|)
expr_stmt|;
block|}
comment|/**       * Adds a new signature to the definition.      *<p>      * Signatures have the following forms:      *<ul>      *<li>{@code void method(String,int)}      *<li>{@code boolean field}      *<li>{@code Class<init>(String)}      *</ul>      * no spaces allowed.      */
DECL|method|addSignature
specifier|private
specifier|final
name|void
name|addSignature
parameter_list|(
name|String
name|className
parameter_list|,
name|String
name|signature
parameter_list|)
block|{
name|String
name|elements
index|[]
init|=
name|signature
operator|.
name|split
argument_list|(
literal|"\u0020"
argument_list|)
decl_stmt|;
if|if
condition|(
name|elements
operator|.
name|length
operator|!=
literal|2
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Malformed signature: "
operator|+
name|signature
argument_list|)
throw|;
block|}
comment|// method or field type (e.g. return type)
name|Type
name|rtn
init|=
name|getTypeInternal
argument_list|(
name|elements
index|[
literal|0
index|]
argument_list|)
decl_stmt|;
name|int
name|parenIndex
init|=
name|elements
index|[
literal|1
index|]
operator|.
name|indexOf
argument_list|(
literal|'('
argument_list|)
decl_stmt|;
if|if
condition|(
name|parenIndex
operator|!=
operator|-
literal|1
condition|)
block|{
comment|// method or ctor
name|int
name|parenEnd
init|=
name|elements
index|[
literal|1
index|]
operator|.
name|indexOf
argument_list|(
literal|')'
argument_list|)
decl_stmt|;
specifier|final
name|Type
name|args
index|[]
decl_stmt|;
if|if
condition|(
name|parenEnd
operator|>
name|parenIndex
operator|+
literal|1
condition|)
block|{
name|String
name|arguments
index|[]
init|=
name|elements
index|[
literal|1
index|]
operator|.
name|substring
argument_list|(
name|parenIndex
operator|+
literal|1
argument_list|,
name|parenEnd
argument_list|)
operator|.
name|split
argument_list|(
literal|","
argument_list|)
decl_stmt|;
name|args
operator|=
operator|new
name|Type
index|[
name|arguments
operator|.
name|length
index|]
expr_stmt|;
for|for
control|(
name|int
name|i
init|=
literal|0
init|;
name|i
operator|<
name|arguments
operator|.
name|length
condition|;
name|i
operator|++
control|)
block|{
name|args
index|[
name|i
index|]
operator|=
name|getTypeInternal
argument_list|(
name|arguments
index|[
name|i
index|]
argument_list|)
expr_stmt|;
block|}
block|}
else|else
block|{
name|args
operator|=
operator|new
name|Type
index|[
literal|0
index|]
expr_stmt|;
block|}
name|String
name|methodName
init|=
name|elements
index|[
literal|1
index|]
operator|.
name|substring
argument_list|(
literal|0
argument_list|,
name|parenIndex
argument_list|)
decl_stmt|;
if|if
condition|(
name|methodName
operator|.
name|equals
argument_list|(
literal|"<init>"
argument_list|)
condition|)
block|{
if|if
condition|(
operator|!
name|elements
index|[
literal|0
index|]
operator|.
name|equals
argument_list|(
name|className
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Constructors must return their own type"
argument_list|)
throw|;
block|}
name|addConstructorInternal
argument_list|(
name|className
argument_list|,
literal|"new"
argument_list|,
name|args
argument_list|)
expr_stmt|;
block|}
else|else
block|{
if|if
condition|(
name|methodName
operator|.
name|indexOf
argument_list|(
literal|'/'
argument_list|)
operator|>=
literal|0
condition|)
block|{
name|String
name|nameAndAlias
index|[]
init|=
name|methodName
operator|.
name|split
argument_list|(
literal|"/"
argument_list|)
decl_stmt|;
if|if
condition|(
name|nameAndAlias
operator|.
name|length
operator|!=
literal|2
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Currently only two aliases are allowed!"
argument_list|)
throw|;
block|}
name|addMethodInternal
argument_list|(
name|className
argument_list|,
name|nameAndAlias
index|[
literal|0
index|]
argument_list|,
name|nameAndAlias
index|[
literal|1
index|]
argument_list|,
name|rtn
argument_list|,
name|args
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|addMethodInternal
argument_list|(
name|className
argument_list|,
name|methodName
argument_list|,
literal|null
argument_list|,
name|rtn
argument_list|,
name|args
argument_list|)
expr_stmt|;
block|}
block|}
block|}
else|else
block|{
comment|// field
name|addFieldInternal
argument_list|(
name|className
argument_list|,
name|elements
index|[
literal|1
index|]
argument_list|,
literal|null
argument_list|,
name|rtn
argument_list|)
expr_stmt|;
block|}
block|}
DECL|method|addMethodInternal
specifier|private
specifier|final
name|void
name|addMethodInternal
parameter_list|(
specifier|final
name|String
name|struct
parameter_list|,
specifier|final
name|String
name|name
parameter_list|,
specifier|final
name|String
name|alias
parameter_list|,
specifier|final
name|Type
name|rtn
parameter_list|,
specifier|final
name|Type
index|[]
name|args
parameter_list|)
block|{
specifier|final
name|Struct
name|owner
init|=
name|structsMap
operator|.
name|get
argument_list|(
name|struct
argument_list|)
decl_stmt|;
if|if
condition|(
name|owner
operator|==
literal|null
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Owner struct ["
operator|+
name|struct
operator|+
literal|"] not defined"
operator|+
literal|" for method ["
operator|+
name|name
operator|+
literal|"]."
argument_list|)
throw|;
block|}
if|if
condition|(
operator|!
name|name
operator|.
name|matches
argument_list|(
literal|"^[_a-zA-Z][_a-zA-Z0-9]*$"
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Invalid method name"
operator|+
literal|" ["
operator|+
name|name
operator|+
literal|"] with the struct ["
operator|+
name|owner
operator|.
name|name
operator|+
literal|"]."
argument_list|)
throw|;
block|}
name|MethodKey
name|methodKey
init|=
operator|new
name|MethodKey
argument_list|(
name|name
argument_list|,
name|args
operator|.
name|length
argument_list|)
decl_stmt|;
if|if
condition|(
name|owner
operator|.
name|constructors
operator|.
name|containsKey
argument_list|(
name|methodKey
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Constructors and methods"
operator|+
literal|" may not have the same signature ["
operator|+
name|methodKey
operator|+
literal|"] within the same struct"
operator|+
literal|" ["
operator|+
name|owner
operator|.
name|name
operator|+
literal|"]."
argument_list|)
throw|;
block|}
if|if
condition|(
name|owner
operator|.
name|staticMethods
operator|.
name|containsKey
argument_list|(
name|methodKey
argument_list|)
operator|||
name|owner
operator|.
name|methods
operator|.
name|containsKey
argument_list|(
name|methodKey
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Duplicate  method signature ["
operator|+
name|methodKey
operator|+
literal|"] found within the struct ["
operator|+
name|owner
operator|.
name|name
operator|+
literal|"]."
argument_list|)
throw|;
block|}
specifier|final
name|Class
argument_list|<
name|?
argument_list|>
index|[]
name|classes
init|=
operator|new
name|Class
argument_list|<
name|?
argument_list|>
index|[
name|args
operator|.
name|length
index|]
decl_stmt|;
for|for
control|(
name|int
name|count
init|=
literal|0
init|;
name|count
operator|<
name|classes
operator|.
name|length
condition|;
operator|++
name|count
control|)
block|{
name|classes
index|[
name|count
index|]
operator|=
name|args
index|[
name|count
index|]
operator|.
name|clazz
expr_stmt|;
block|}
specifier|final
name|java
operator|.
name|lang
operator|.
name|reflect
operator|.
name|Method
name|reflect
decl_stmt|;
try|try
block|{
name|reflect
operator|=
name|owner
operator|.
name|clazz
operator|.
name|getMethod
argument_list|(
name|alias
operator|==
literal|null
condition|?
name|name
else|:
name|alias
argument_list|,
name|classes
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|NoSuchMethodException
name|exception
parameter_list|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Method ["
operator|+
operator|(
name|alias
operator|==
literal|null
condition|?
name|name
else|:
name|alias
operator|)
operator|+
literal|"] not found for class ["
operator|+
name|owner
operator|.
name|clazz
operator|.
name|getName
argument_list|()
operator|+
literal|"]"
operator|+
literal|" with arguments "
operator|+
name|Arrays
operator|.
name|toString
argument_list|(
name|classes
argument_list|)
operator|+
literal|"."
argument_list|)
throw|;
block|}
if|if
condition|(
operator|!
name|reflect
operator|.
name|getReturnType
argument_list|()
operator|.
name|equals
argument_list|(
name|rtn
operator|.
name|clazz
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Specified return type class ["
operator|+
name|rtn
operator|.
name|clazz
operator|+
literal|"]"
operator|+
literal|" does not match the found return type class ["
operator|+
name|reflect
operator|.
name|getReturnType
argument_list|()
operator|+
literal|"] for the"
operator|+
literal|" method ["
operator|+
name|name
operator|+
literal|"]"
operator|+
literal|" within the struct ["
operator|+
name|owner
operator|.
name|name
operator|+
literal|"]."
argument_list|)
throw|;
block|}
specifier|final
name|org
operator|.
name|objectweb
operator|.
name|asm
operator|.
name|commons
operator|.
name|Method
name|asm
init|=
name|org
operator|.
name|objectweb
operator|.
name|asm
operator|.
name|commons
operator|.
name|Method
operator|.
name|getMethod
argument_list|(
name|reflect
argument_list|)
decl_stmt|;
name|MethodHandle
name|handle
decl_stmt|;
try|try
block|{
name|handle
operator|=
name|MethodHandles
operator|.
name|publicLookup
argument_list|()
operator|.
name|in
argument_list|(
name|owner
operator|.
name|clazz
argument_list|)
operator|.
name|unreflect
argument_list|(
name|reflect
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalAccessException
name|exception
parameter_list|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Method ["
operator|+
operator|(
name|alias
operator|==
literal|null
condition|?
name|name
else|:
name|alias
operator|)
operator|+
literal|"]"
operator|+
literal|" not found for class ["
operator|+
name|owner
operator|.
name|clazz
operator|.
name|getName
argument_list|()
operator|+
literal|"]"
operator|+
literal|" with arguments "
operator|+
name|Arrays
operator|.
name|toString
argument_list|(
name|classes
argument_list|)
operator|+
literal|"."
argument_list|)
throw|;
block|}
specifier|final
name|Method
name|method
init|=
operator|new
name|Method
argument_list|(
name|name
argument_list|,
name|owner
argument_list|,
name|rtn
argument_list|,
name|Arrays
operator|.
name|asList
argument_list|(
name|args
argument_list|)
argument_list|,
name|asm
argument_list|,
name|reflect
argument_list|,
name|handle
argument_list|)
decl_stmt|;
specifier|final
name|int
name|modifiers
init|=
name|reflect
operator|.
name|getModifiers
argument_list|()
decl_stmt|;
if|if
condition|(
name|java
operator|.
name|lang
operator|.
name|reflect
operator|.
name|Modifier
operator|.
name|isStatic
argument_list|(
name|modifiers
argument_list|)
condition|)
block|{
name|owner
operator|.
name|staticMethods
operator|.
name|put
argument_list|(
name|methodKey
argument_list|,
name|method
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|owner
operator|.
name|methods
operator|.
name|put
argument_list|(
name|methodKey
argument_list|,
name|method
argument_list|)
expr_stmt|;
block|}
block|}
DECL|method|addFieldInternal
specifier|private
specifier|final
name|void
name|addFieldInternal
parameter_list|(
specifier|final
name|String
name|struct
parameter_list|,
specifier|final
name|String
name|name
parameter_list|,
specifier|final
name|String
name|alias
parameter_list|,
specifier|final
name|Type
name|type
parameter_list|)
block|{
specifier|final
name|Struct
name|owner
init|=
name|structsMap
operator|.
name|get
argument_list|(
name|struct
argument_list|)
decl_stmt|;
if|if
condition|(
name|owner
operator|==
literal|null
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Owner struct ["
operator|+
name|struct
operator|+
literal|"] not defined for "
operator|+
literal|" field ["
operator|+
name|name
operator|+
literal|"]."
argument_list|)
throw|;
block|}
if|if
condition|(
operator|!
name|name
operator|.
name|matches
argument_list|(
literal|"^[_a-zA-Z][_a-zA-Z0-9]*$"
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Invalid field "
operator|+
literal|" name ["
operator|+
name|name
operator|+
literal|"] with the struct ["
operator|+
name|owner
operator|.
name|name
operator|+
literal|"]."
argument_list|)
throw|;
block|}
if|if
condition|(
name|owner
operator|.
name|staticMembers
operator|.
name|containsKey
argument_list|(
name|name
argument_list|)
operator|||
name|owner
operator|.
name|members
operator|.
name|containsKey
argument_list|(
name|name
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Duplicate field name ["
operator|+
name|name
operator|+
literal|"]"
operator|+
literal|" found within the struct ["
operator|+
name|owner
operator|.
name|name
operator|+
literal|"]."
argument_list|)
throw|;
block|}
name|java
operator|.
name|lang
operator|.
name|reflect
operator|.
name|Field
name|reflect
decl_stmt|;
try|try
block|{
name|reflect
operator|=
name|owner
operator|.
name|clazz
operator|.
name|getField
argument_list|(
name|alias
operator|==
literal|null
condition|?
name|name
else|:
name|alias
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|NoSuchFieldException
name|exception
parameter_list|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Field ["
operator|+
operator|(
name|alias
operator|==
literal|null
condition|?
name|name
else|:
name|alias
operator|)
operator|+
literal|"]"
operator|+
literal|" not found for class ["
operator|+
name|owner
operator|.
name|clazz
operator|.
name|getName
argument_list|()
operator|+
literal|"]."
argument_list|)
throw|;
block|}
specifier|final
name|int
name|modifiers
init|=
name|reflect
operator|.
name|getModifiers
argument_list|()
decl_stmt|;
name|boolean
name|isStatic
init|=
name|java
operator|.
name|lang
operator|.
name|reflect
operator|.
name|Modifier
operator|.
name|isStatic
argument_list|(
name|modifiers
argument_list|)
decl_stmt|;
name|MethodHandle
name|getter
init|=
literal|null
decl_stmt|;
name|MethodHandle
name|setter
init|=
literal|null
decl_stmt|;
try|try
block|{
if|if
condition|(
operator|!
name|isStatic
condition|)
block|{
name|getter
operator|=
name|MethodHandles
operator|.
name|publicLookup
argument_list|()
operator|.
name|unreflectGetter
argument_list|(
name|reflect
argument_list|)
expr_stmt|;
name|setter
operator|=
name|MethodHandles
operator|.
name|publicLookup
argument_list|()
operator|.
name|unreflectSetter
argument_list|(
name|reflect
argument_list|)
expr_stmt|;
block|}
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalAccessException
name|exception
parameter_list|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Getter/Setter ["
operator|+
operator|(
name|alias
operator|==
literal|null
condition|?
name|name
else|:
name|alias
operator|)
operator|+
literal|"]"
operator|+
literal|" not found for class ["
operator|+
name|owner
operator|.
name|clazz
operator|.
name|getName
argument_list|()
operator|+
literal|"]."
argument_list|)
throw|;
block|}
specifier|final
name|Field
name|field
init|=
operator|new
name|Field
argument_list|(
name|name
argument_list|,
name|owner
argument_list|,
name|type
argument_list|,
name|reflect
argument_list|,
name|getter
argument_list|,
name|setter
argument_list|)
decl_stmt|;
if|if
condition|(
name|isStatic
condition|)
block|{
comment|// require that all static fields are static final
if|if
condition|(
operator|!
name|java
operator|.
name|lang
operator|.
name|reflect
operator|.
name|Modifier
operator|.
name|isFinal
argument_list|(
name|modifiers
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Static ["
operator|+
name|name
operator|+
literal|"]"
operator|+
literal|" within the struct ["
operator|+
name|owner
operator|.
name|name
operator|+
literal|"] is not final."
argument_list|)
throw|;
block|}
name|owner
operator|.
name|staticMembers
operator|.
name|put
argument_list|(
name|alias
operator|==
literal|null
condition|?
name|name
else|:
name|alias
argument_list|,
name|field
argument_list|)
expr_stmt|;
block|}
else|else
block|{
name|owner
operator|.
name|members
operator|.
name|put
argument_list|(
name|alias
operator|==
literal|null
condition|?
name|name
else|:
name|alias
argument_list|,
name|field
argument_list|)
expr_stmt|;
block|}
block|}
DECL|method|copyStruct
specifier|private
specifier|final
name|void
name|copyStruct
parameter_list|(
specifier|final
name|String
name|struct
parameter_list|,
name|List
argument_list|<
name|String
argument_list|>
name|children
parameter_list|)
block|{
specifier|final
name|Struct
name|owner
init|=
name|structsMap
operator|.
name|get
argument_list|(
name|struct
argument_list|)
decl_stmt|;
if|if
condition|(
name|owner
operator|==
literal|null
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Owner struct ["
operator|+
name|struct
operator|+
literal|"] not defined for copy."
argument_list|)
throw|;
block|}
for|for
control|(
name|int
name|count
init|=
literal|0
init|;
name|count
operator|<
name|children
operator|.
name|size
argument_list|()
condition|;
operator|++
name|count
control|)
block|{
specifier|final
name|Struct
name|child
init|=
name|structsMap
operator|.
name|get
argument_list|(
name|children
operator|.
name|get
argument_list|(
name|count
argument_list|)
argument_list|)
decl_stmt|;
if|if
condition|(
name|struct
operator|==
literal|null
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Child struct ["
operator|+
name|children
operator|.
name|get
argument_list|(
name|count
argument_list|)
operator|+
literal|"]"
operator|+
literal|" not defined for copy to owner struct ["
operator|+
name|owner
operator|.
name|name
operator|+
literal|"]."
argument_list|)
throw|;
block|}
if|if
condition|(
operator|!
name|child
operator|.
name|clazz
operator|.
name|isAssignableFrom
argument_list|(
name|owner
operator|.
name|clazz
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|ClassCastException
argument_list|(
literal|"Child struct ["
operator|+
name|child
operator|.
name|name
operator|+
literal|"]"
operator|+
literal|" is not a super type of owner struct ["
operator|+
name|owner
operator|.
name|name
operator|+
literal|"] in copy."
argument_list|)
throw|;
block|}
specifier|final
name|boolean
name|object
init|=
name|child
operator|.
name|clazz
operator|.
name|equals
argument_list|(
name|Object
operator|.
name|class
argument_list|)
operator|&&
name|java
operator|.
name|lang
operator|.
name|reflect
operator|.
name|Modifier
operator|.
name|isInterface
argument_list|(
name|owner
operator|.
name|clazz
operator|.
name|getModifiers
argument_list|()
argument_list|)
decl_stmt|;
for|for
control|(
name|Map
operator|.
name|Entry
argument_list|<
name|MethodKey
argument_list|,
name|Method
argument_list|>
name|kvPair
range|:
name|child
operator|.
name|methods
operator|.
name|entrySet
argument_list|()
control|)
block|{
name|MethodKey
name|methodKey
init|=
name|kvPair
operator|.
name|getKey
argument_list|()
decl_stmt|;
name|Method
name|method
init|=
name|kvPair
operator|.
name|getValue
argument_list|()
decl_stmt|;
if|if
condition|(
name|owner
operator|.
name|methods
operator|.
name|get
argument_list|(
name|methodKey
argument_list|)
operator|==
literal|null
condition|)
block|{
specifier|final
name|Class
argument_list|<
name|?
argument_list|>
name|clazz
init|=
name|object
condition|?
name|Object
operator|.
name|class
else|:
name|owner
operator|.
name|clazz
decl_stmt|;
name|java
operator|.
name|lang
operator|.
name|reflect
operator|.
name|Method
name|reflect
decl_stmt|;
name|MethodHandle
name|handle
decl_stmt|;
try|try
block|{
name|reflect
operator|=
name|clazz
operator|.
name|getMethod
argument_list|(
name|method
operator|.
name|method
operator|.
name|getName
argument_list|()
argument_list|,
name|method
operator|.
name|reflect
operator|.
name|getParameterTypes
argument_list|()
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|NoSuchMethodException
name|exception
parameter_list|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Method ["
operator|+
name|method
operator|.
name|method
operator|.
name|getName
argument_list|()
operator|+
literal|"] not found for"
operator|+
literal|" class ["
operator|+
name|owner
operator|.
name|clazz
operator|.
name|getName
argument_list|()
operator|+
literal|"] with arguments "
operator|+
name|Arrays
operator|.
name|toString
argument_list|(
name|method
operator|.
name|reflect
operator|.
name|getParameterTypes
argument_list|()
argument_list|)
operator|+
literal|"."
argument_list|)
throw|;
block|}
try|try
block|{
name|handle
operator|=
name|MethodHandles
operator|.
name|publicLookup
argument_list|()
operator|.
name|in
argument_list|(
name|owner
operator|.
name|clazz
argument_list|)
operator|.
name|unreflect
argument_list|(
name|reflect
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalAccessException
name|exception
parameter_list|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Method ["
operator|+
name|method
operator|.
name|method
operator|.
name|getName
argument_list|()
operator|+
literal|"] not found for"
operator|+
literal|" class ["
operator|+
name|owner
operator|.
name|clazz
operator|.
name|getName
argument_list|()
operator|+
literal|"] with arguments "
operator|+
name|Arrays
operator|.
name|toString
argument_list|(
name|method
operator|.
name|reflect
operator|.
name|getParameterTypes
argument_list|()
argument_list|)
operator|+
literal|"."
argument_list|)
throw|;
block|}
name|owner
operator|.
name|methods
operator|.
name|put
argument_list|(
name|methodKey
argument_list|,
operator|new
name|Method
argument_list|(
name|method
operator|.
name|name
argument_list|,
name|owner
argument_list|,
name|method
operator|.
name|rtn
argument_list|,
name|method
operator|.
name|arguments
argument_list|,
name|method
operator|.
name|method
argument_list|,
name|reflect
argument_list|,
name|handle
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
for|for
control|(
specifier|final
name|Field
name|field
range|:
name|child
operator|.
name|members
operator|.
name|values
argument_list|()
control|)
block|{
if|if
condition|(
name|owner
operator|.
name|members
operator|.
name|get
argument_list|(
name|field
operator|.
name|name
argument_list|)
operator|==
literal|null
condition|)
block|{
name|java
operator|.
name|lang
operator|.
name|reflect
operator|.
name|Field
name|reflect
decl_stmt|;
name|MethodHandle
name|getter
decl_stmt|;
name|MethodHandle
name|setter
decl_stmt|;
try|try
block|{
name|reflect
operator|=
name|owner
operator|.
name|clazz
operator|.
name|getField
argument_list|(
name|field
operator|.
name|reflect
operator|.
name|getName
argument_list|()
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|NoSuchFieldException
name|exception
parameter_list|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Field ["
operator|+
name|field
operator|.
name|reflect
operator|.
name|getName
argument_list|()
operator|+
literal|"]"
operator|+
literal|" not found for class ["
operator|+
name|owner
operator|.
name|clazz
operator|.
name|getName
argument_list|()
operator|+
literal|"]."
argument_list|)
throw|;
block|}
try|try
block|{
name|getter
operator|=
name|MethodHandles
operator|.
name|publicLookup
argument_list|()
operator|.
name|unreflectGetter
argument_list|(
name|reflect
argument_list|)
expr_stmt|;
name|setter
operator|=
name|MethodHandles
operator|.
name|publicLookup
argument_list|()
operator|.
name|unreflectSetter
argument_list|(
name|reflect
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|IllegalAccessException
name|exception
parameter_list|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Getter/Setter ["
operator|+
name|field
operator|.
name|name
operator|+
literal|"]"
operator|+
literal|" not found for class ["
operator|+
name|owner
operator|.
name|clazz
operator|.
name|getName
argument_list|()
operator|+
literal|"]."
argument_list|)
throw|;
block|}
name|owner
operator|.
name|members
operator|.
name|put
argument_list|(
name|field
operator|.
name|name
argument_list|,
operator|new
name|Field
argument_list|(
name|field
operator|.
name|name
argument_list|,
name|owner
argument_list|,
name|field
operator|.
name|type
argument_list|,
name|reflect
argument_list|,
name|getter
argument_list|,
name|setter
argument_list|)
argument_list|)
expr_stmt|;
block|}
block|}
block|}
block|}
DECL|method|addTransform
specifier|private
specifier|final
name|void
name|addTransform
parameter_list|(
specifier|final
name|Type
name|from
parameter_list|,
specifier|final
name|Type
name|to
parameter_list|,
specifier|final
name|boolean
name|explicit
parameter_list|)
block|{
if|if
condition|(
name|from
operator|.
name|equals
argument_list|(
name|to
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Transform cannot"
operator|+
literal|" have cast type from ["
operator|+
name|from
operator|.
name|name
operator|+
literal|"] be the same as cast type to ["
operator|+
name|to
operator|.
name|name
operator|+
literal|"]."
argument_list|)
throw|;
block|}
if|if
condition|(
operator|!
name|from
operator|.
name|sort
operator|.
name|primitive
operator|||
operator|!
name|to
operator|.
name|sort
operator|.
name|primitive
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Only transforms between two primitives may be a simple cast, but"
operator|+
literal|"found ["
operator|+
name|from
operator|.
name|name
operator|+
literal|"] and ["
operator|+
name|to
operator|.
name|name
operator|+
literal|"]."
argument_list|)
throw|;
block|}
specifier|final
name|Cast
name|cast
init|=
operator|new
name|Cast
argument_list|(
name|from
argument_list|,
name|to
argument_list|,
name|explicit
argument_list|)
decl_stmt|;
if|if
condition|(
name|transformsMap
operator|.
name|containsKey
argument_list|(
name|cast
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Transform with "
operator|+
literal|" cast type from ["
operator|+
name|from
operator|.
name|name
operator|+
literal|"] to cast type to ["
operator|+
name|to
operator|.
name|name
operator|+
literal|"] already defined."
argument_list|)
throw|;
block|}
name|transformsMap
operator|.
name|put
argument_list|(
name|cast
argument_list|,
name|cast
argument_list|)
expr_stmt|;
block|}
DECL|method|addTransform
specifier|private
specifier|final
name|void
name|addTransform
parameter_list|(
specifier|final
name|Type
name|from
parameter_list|,
specifier|final
name|Type
name|to
parameter_list|,
specifier|final
name|String
name|struct
parameter_list|,
specifier|final
name|String
name|name
parameter_list|,
specifier|final
name|boolean
name|statik
parameter_list|,
specifier|final
name|boolean
name|explicit
parameter_list|)
block|{
specifier|final
name|Struct
name|owner
init|=
name|structsMap
operator|.
name|get
argument_list|(
name|struct
argument_list|)
decl_stmt|;
if|if
condition|(
name|owner
operator|==
literal|null
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Owner struct ["
operator|+
name|struct
operator|+
literal|"] not defined for"
operator|+
literal|" transform with cast type from ["
operator|+
name|from
operator|.
name|name
operator|+
literal|"] and cast type to ["
operator|+
name|to
operator|.
name|name
operator|+
literal|"]."
argument_list|)
throw|;
block|}
if|if
condition|(
name|from
operator|.
name|equals
argument_list|(
name|to
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Transform with owner struct ["
operator|+
name|owner
operator|.
name|name
operator|+
literal|"] cannot"
operator|+
literal|" have cast type from ["
operator|+
name|from
operator|.
name|name
operator|+
literal|"] be the same as cast type to ["
operator|+
name|to
operator|.
name|name
operator|+
literal|"]."
argument_list|)
throw|;
block|}
specifier|final
name|Cast
name|cast
init|=
operator|new
name|Cast
argument_list|(
name|from
argument_list|,
name|to
argument_list|,
name|explicit
argument_list|)
decl_stmt|;
if|if
condition|(
name|transformsMap
operator|.
name|containsKey
argument_list|(
name|cast
argument_list|)
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Transform with owner struct ["
operator|+
name|owner
operator|.
name|name
operator|+
literal|"]"
operator|+
literal|" and cast type from ["
operator|+
name|from
operator|.
name|name
operator|+
literal|"] to cast type to ["
operator|+
name|to
operator|.
name|name
operator|+
literal|"] already defined."
argument_list|)
throw|;
block|}
specifier|final
name|Cast
name|transform
decl_stmt|;
specifier|final
name|Method
name|method
decl_stmt|;
name|Type
name|upcast
init|=
literal|null
decl_stmt|;
name|Type
name|downcast
init|=
literal|null
decl_stmt|;
comment|// transforms are implicitly arity of 0, unless a static method where its 1 (receiver passed)
specifier|final
name|MethodKey
name|methodKey
init|=
operator|new
name|MethodKey
argument_list|(
name|name
argument_list|,
name|statik
condition|?
literal|1
else|:
literal|0
argument_list|)
decl_stmt|;
if|if
condition|(
name|statik
condition|)
block|{
name|method
operator|=
name|owner
operator|.
name|staticMethods
operator|.
name|get
argument_list|(
name|methodKey
argument_list|)
expr_stmt|;
if|if
condition|(
name|method
operator|==
literal|null
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Transform with owner struct ["
operator|+
name|owner
operator|.
name|name
operator|+
literal|"]"
operator|+
literal|" and cast type from ["
operator|+
name|from
operator|.
name|name
operator|+
literal|"] to cast type to ["
operator|+
name|to
operator|.
name|name
operator|+
literal|"] using a function ["
operator|+
name|name
operator|+
literal|"] that is not defined."
argument_list|)
throw|;
block|}
if|if
condition|(
name|method
operator|.
name|arguments
operator|.
name|size
argument_list|()
operator|!=
literal|1
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Transform with owner struct ["
operator|+
name|owner
operator|.
name|name
operator|+
literal|"]"
operator|+
literal|" and cast type from ["
operator|+
name|from
operator|.
name|name
operator|+
literal|"] to cast type to ["
operator|+
name|to
operator|.
name|name
operator|+
literal|"] using function ["
operator|+
name|name
operator|+
literal|"] does not have a single type argument."
argument_list|)
throw|;
block|}
name|Type
name|argument
init|=
name|method
operator|.
name|arguments
operator|.
name|get
argument_list|(
literal|0
argument_list|)
decl_stmt|;
if|if
condition|(
operator|!
name|argument
operator|.
name|clazz
operator|.
name|isAssignableFrom
argument_list|(
name|from
operator|.
name|clazz
argument_list|)
condition|)
block|{
if|if
condition|(
name|from
operator|.
name|clazz
operator|.
name|isAssignableFrom
argument_list|(
name|argument
operator|.
name|clazz
argument_list|)
condition|)
block|{
name|upcast
operator|=
name|argument
expr_stmt|;
block|}
else|else
block|{
throw|throw
operator|new
name|ClassCastException
argument_list|(
literal|"Transform with owner struct ["
operator|+
name|owner
operator|.
name|name
operator|+
literal|"]"
operator|+
literal|" and cast type from ["
operator|+
name|from
operator|.
name|name
operator|+
literal|"] to cast type to ["
operator|+
name|to
operator|.
name|name
operator|+
literal|"] using"
operator|+
literal|" function ["
operator|+
name|name
operator|+
literal|"] cannot cast from type to the function input argument type."
argument_list|)
throw|;
block|}
block|}
specifier|final
name|Type
name|rtn
init|=
name|method
operator|.
name|rtn
decl_stmt|;
if|if
condition|(
operator|!
name|to
operator|.
name|clazz
operator|.
name|isAssignableFrom
argument_list|(
name|rtn
operator|.
name|clazz
argument_list|)
condition|)
block|{
if|if
condition|(
name|rtn
operator|.
name|clazz
operator|.
name|isAssignableFrom
argument_list|(
name|to
operator|.
name|clazz
argument_list|)
condition|)
block|{
name|downcast
operator|=
name|to
expr_stmt|;
block|}
else|else
block|{
throw|throw
operator|new
name|ClassCastException
argument_list|(
literal|"Transform with owner struct ["
operator|+
name|owner
operator|.
name|name
operator|+
literal|"]"
operator|+
literal|" and cast type from ["
operator|+
name|from
operator|.
name|name
operator|+
literal|"] to cast type to ["
operator|+
name|to
operator|.
name|name
operator|+
literal|"] using"
operator|+
literal|" function ["
operator|+
name|name
operator|+
literal|"] cannot cast to type to the function return argument type."
argument_list|)
throw|;
block|}
block|}
block|}
else|else
block|{
name|method
operator|=
name|owner
operator|.
name|methods
operator|.
name|get
argument_list|(
name|methodKey
argument_list|)
expr_stmt|;
if|if
condition|(
name|method
operator|==
literal|null
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Transform with owner struct ["
operator|+
name|owner
operator|.
name|name
operator|+
literal|"]"
operator|+
literal|" and cast type from ["
operator|+
name|from
operator|.
name|name
operator|+
literal|"] to cast type to ["
operator|+
name|to
operator|.
name|name
operator|+
literal|"] using a method ["
operator|+
name|name
operator|+
literal|"] that is not defined."
argument_list|)
throw|;
block|}
if|if
condition|(
operator|!
name|method
operator|.
name|arguments
operator|.
name|isEmpty
argument_list|()
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Transform with owner struct ["
operator|+
name|owner
operator|.
name|name
operator|+
literal|"]"
operator|+
literal|" and cast type from ["
operator|+
name|from
operator|.
name|name
operator|+
literal|"] to cast type to ["
operator|+
name|to
operator|.
name|name
operator|+
literal|"] using method ["
operator|+
name|name
operator|+
literal|"] does not have a single type argument."
argument_list|)
throw|;
block|}
if|if
condition|(
operator|!
name|owner
operator|.
name|clazz
operator|.
name|isAssignableFrom
argument_list|(
name|from
operator|.
name|clazz
argument_list|)
condition|)
block|{
if|if
condition|(
name|from
operator|.
name|clazz
operator|.
name|isAssignableFrom
argument_list|(
name|owner
operator|.
name|clazz
argument_list|)
condition|)
block|{
name|upcast
operator|=
name|getTypeInternal
argument_list|(
name|owner
operator|.
name|name
argument_list|)
expr_stmt|;
block|}
else|else
block|{
throw|throw
operator|new
name|ClassCastException
argument_list|(
literal|"Transform with owner struct ["
operator|+
name|owner
operator|.
name|name
operator|+
literal|"]"
operator|+
literal|" and cast type from ["
operator|+
name|from
operator|.
name|name
operator|+
literal|"] to cast type to ["
operator|+
name|to
operator|.
name|name
operator|+
literal|"] using"
operator|+
literal|" method ["
operator|+
name|name
operator|+
literal|"] cannot cast from type to the method input argument type."
argument_list|)
throw|;
block|}
block|}
specifier|final
name|Type
name|rtn
init|=
name|method
operator|.
name|rtn
decl_stmt|;
if|if
condition|(
operator|!
name|to
operator|.
name|clazz
operator|.
name|isAssignableFrom
argument_list|(
name|rtn
operator|.
name|clazz
argument_list|)
condition|)
block|{
if|if
condition|(
name|rtn
operator|.
name|clazz
operator|.
name|isAssignableFrom
argument_list|(
name|to
operator|.
name|clazz
argument_list|)
condition|)
block|{
name|downcast
operator|=
name|to
expr_stmt|;
block|}
else|else
block|{
throw|throw
operator|new
name|ClassCastException
argument_list|(
literal|"Transform with owner struct ["
operator|+
name|owner
operator|.
name|name
operator|+
literal|"]"
operator|+
literal|" and cast type from ["
operator|+
name|from
operator|.
name|name
operator|+
literal|"] to cast type to ["
operator|+
name|to
operator|.
name|name
operator|+
literal|"]"
operator|+
literal|" using method ["
operator|+
name|name
operator|+
literal|"] cannot cast to type to the method return argument type."
argument_list|)
throw|;
block|}
block|}
block|}
name|transform
operator|=
operator|new
name|Transform
argument_list|(
name|cast
argument_list|,
name|method
argument_list|,
name|upcast
argument_list|,
name|downcast
argument_list|)
expr_stmt|;
name|transformsMap
operator|.
name|put
argument_list|(
name|cast
argument_list|,
name|transform
argument_list|)
expr_stmt|;
block|}
comment|/**      * Precomputes a more efficient structure for dynamic method/field access.      */
DECL|method|addRuntimeClass
specifier|private
name|void
name|addRuntimeClass
parameter_list|(
specifier|final
name|Struct
name|struct
parameter_list|)
block|{
specifier|final
name|Map
argument_list|<
name|MethodKey
argument_list|,
name|Method
argument_list|>
name|methods
init|=
name|struct
operator|.
name|methods
decl_stmt|;
specifier|final
name|Map
argument_list|<
name|String
argument_list|,
name|MethodHandle
argument_list|>
name|getters
init|=
operator|new
name|HashMap
argument_list|<>
argument_list|()
decl_stmt|;
specifier|final
name|Map
argument_list|<
name|String
argument_list|,
name|MethodHandle
argument_list|>
name|setters
init|=
operator|new
name|HashMap
argument_list|<>
argument_list|()
decl_stmt|;
comment|// add all members
for|for
control|(
specifier|final
name|Map
operator|.
name|Entry
argument_list|<
name|String
argument_list|,
name|Field
argument_list|>
name|member
range|:
name|struct
operator|.
name|members
operator|.
name|entrySet
argument_list|()
control|)
block|{
name|getters
operator|.
name|put
argument_list|(
name|member
operator|.
name|getKey
argument_list|()
argument_list|,
name|member
operator|.
name|getValue
argument_list|()
operator|.
name|getter
argument_list|)
expr_stmt|;
name|setters
operator|.
name|put
argument_list|(
name|member
operator|.
name|getKey
argument_list|()
argument_list|,
name|member
operator|.
name|getValue
argument_list|()
operator|.
name|setter
argument_list|)
expr_stmt|;
block|}
comment|// add all getters/setters
for|for
control|(
specifier|final
name|Map
operator|.
name|Entry
argument_list|<
name|MethodKey
argument_list|,
name|Method
argument_list|>
name|method
range|:
name|methods
operator|.
name|entrySet
argument_list|()
control|)
block|{
specifier|final
name|String
name|name
init|=
name|method
operator|.
name|getKey
argument_list|()
operator|.
name|name
decl_stmt|;
specifier|final
name|Method
name|m
init|=
name|method
operator|.
name|getValue
argument_list|()
decl_stmt|;
if|if
condition|(
name|m
operator|.
name|arguments
operator|.
name|size
argument_list|()
operator|==
literal|0
operator|&&
name|name
operator|.
name|startsWith
argument_list|(
literal|"get"
argument_list|)
operator|&&
name|name
operator|.
name|length
argument_list|()
operator|>
literal|3
operator|&&
name|Character
operator|.
name|isUpperCase
argument_list|(
name|name
operator|.
name|charAt
argument_list|(
literal|3
argument_list|)
argument_list|)
condition|)
block|{
specifier|final
name|StringBuilder
name|newName
init|=
operator|new
name|StringBuilder
argument_list|()
decl_stmt|;
name|newName
operator|.
name|append
argument_list|(
name|Character
operator|.
name|toLowerCase
argument_list|(
name|name
operator|.
name|charAt
argument_list|(
literal|3
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|newName
operator|.
name|append
argument_list|(
name|name
operator|.
name|substring
argument_list|(
literal|4
argument_list|)
argument_list|)
expr_stmt|;
name|getters
operator|.
name|putIfAbsent
argument_list|(
name|newName
operator|.
name|toString
argument_list|()
argument_list|,
name|m
operator|.
name|handle
argument_list|)
expr_stmt|;
block|}
elseif|else
if|if
condition|(
name|m
operator|.
name|arguments
operator|.
name|size
argument_list|()
operator|==
literal|0
operator|&&
name|name
operator|.
name|startsWith
argument_list|(
literal|"is"
argument_list|)
operator|&&
name|name
operator|.
name|length
argument_list|()
operator|>
literal|2
operator|&&
name|Character
operator|.
name|isUpperCase
argument_list|(
name|name
operator|.
name|charAt
argument_list|(
literal|2
argument_list|)
argument_list|)
condition|)
block|{
specifier|final
name|StringBuilder
name|newName
init|=
operator|new
name|StringBuilder
argument_list|()
decl_stmt|;
name|newName
operator|.
name|append
argument_list|(
name|Character
operator|.
name|toLowerCase
argument_list|(
name|name
operator|.
name|charAt
argument_list|(
literal|2
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|newName
operator|.
name|append
argument_list|(
name|name
operator|.
name|substring
argument_list|(
literal|3
argument_list|)
argument_list|)
expr_stmt|;
name|getters
operator|.
name|putIfAbsent
argument_list|(
name|newName
operator|.
name|toString
argument_list|()
argument_list|,
name|m
operator|.
name|handle
argument_list|)
expr_stmt|;
block|}
if|if
condition|(
name|m
operator|.
name|arguments
operator|.
name|size
argument_list|()
operator|==
literal|1
operator|&&
name|name
operator|.
name|startsWith
argument_list|(
literal|"set"
argument_list|)
operator|&&
name|name
operator|.
name|length
argument_list|()
operator|>
literal|3
operator|&&
name|Character
operator|.
name|isUpperCase
argument_list|(
name|name
operator|.
name|charAt
argument_list|(
literal|3
argument_list|)
argument_list|)
condition|)
block|{
specifier|final
name|StringBuilder
name|newName
init|=
operator|new
name|StringBuilder
argument_list|()
decl_stmt|;
name|newName
operator|.
name|append
argument_list|(
name|Character
operator|.
name|toLowerCase
argument_list|(
name|name
operator|.
name|charAt
argument_list|(
literal|3
argument_list|)
argument_list|)
argument_list|)
expr_stmt|;
name|newName
operator|.
name|append
argument_list|(
name|name
operator|.
name|substring
argument_list|(
literal|4
argument_list|)
argument_list|)
expr_stmt|;
name|setters
operator|.
name|putIfAbsent
argument_list|(
name|newName
operator|.
name|toString
argument_list|()
argument_list|,
name|m
operator|.
name|handle
argument_list|)
expr_stmt|;
block|}
block|}
name|runtimeMap
operator|.
name|put
argument_list|(
name|struct
operator|.
name|clazz
argument_list|,
operator|new
name|RuntimeClass
argument_list|(
name|methods
argument_list|,
name|getters
argument_list|,
name|setters
argument_list|)
argument_list|)
expr_stmt|;
block|}
DECL|method|getTypeInternal
specifier|private
name|Type
name|getTypeInternal
parameter_list|(
specifier|final
name|String
name|name
parameter_list|)
block|{
comment|// simple types (e.g. 0 array dimensions) are a simple hash lookup for speed
name|Type
name|simple
init|=
name|simpleTypesMap
operator|.
name|get
argument_list|(
name|name
argument_list|)
decl_stmt|;
if|if
condition|(
name|simple
operator|!=
literal|null
condition|)
block|{
return|return
name|simple
return|;
block|}
specifier|final
name|int
name|dimensions
init|=
name|getDimensions
argument_list|(
name|name
argument_list|)
decl_stmt|;
specifier|final
name|String
name|structstr
init|=
name|dimensions
operator|==
literal|0
condition|?
name|name
else|:
name|name
operator|.
name|substring
argument_list|(
literal|0
argument_list|,
name|name
operator|.
name|indexOf
argument_list|(
literal|'['
argument_list|)
argument_list|)
decl_stmt|;
specifier|final
name|Struct
name|struct
init|=
name|structsMap
operator|.
name|get
argument_list|(
name|structstr
argument_list|)
decl_stmt|;
if|if
condition|(
name|struct
operator|==
literal|null
condition|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"The struct with name ["
operator|+
name|name
operator|+
literal|"] has not been defined."
argument_list|)
throw|;
block|}
return|return
name|getTypeInternal
argument_list|(
name|struct
argument_list|,
name|dimensions
argument_list|)
return|;
block|}
DECL|method|getTypeInternal
specifier|private
name|Type
name|getTypeInternal
parameter_list|(
specifier|final
name|Struct
name|struct
parameter_list|,
specifier|final
name|int
name|dimensions
parameter_list|)
block|{
name|String
name|name
init|=
name|struct
operator|.
name|name
decl_stmt|;
name|org
operator|.
name|objectweb
operator|.
name|asm
operator|.
name|Type
name|type
init|=
name|struct
operator|.
name|type
decl_stmt|;
name|Class
argument_list|<
name|?
argument_list|>
name|clazz
init|=
name|struct
operator|.
name|clazz
decl_stmt|;
name|Sort
name|sort
decl_stmt|;
if|if
condition|(
name|dimensions
operator|>
literal|0
condition|)
block|{
specifier|final
name|StringBuilder
name|builder
init|=
operator|new
name|StringBuilder
argument_list|(
name|name
argument_list|)
decl_stmt|;
specifier|final
name|char
index|[]
name|brackets
init|=
operator|new
name|char
index|[
name|dimensions
index|]
decl_stmt|;
for|for
control|(
name|int
name|count
init|=
literal|0
init|;
name|count
operator|<
name|dimensions
condition|;
operator|++
name|count
control|)
block|{
name|builder
operator|.
name|append
argument_list|(
literal|"[]"
argument_list|)
expr_stmt|;
name|brackets
index|[
name|count
index|]
operator|=
literal|'['
expr_stmt|;
block|}
specifier|final
name|String
name|descriptor
init|=
operator|new
name|String
argument_list|(
name|brackets
argument_list|)
operator|+
name|struct
operator|.
name|type
operator|.
name|getDescriptor
argument_list|()
decl_stmt|;
name|name
operator|=
name|builder
operator|.
name|toString
argument_list|()
expr_stmt|;
name|type
operator|=
name|org
operator|.
name|objectweb
operator|.
name|asm
operator|.
name|Type
operator|.
name|getType
argument_list|(
name|descriptor
argument_list|)
expr_stmt|;
try|try
block|{
name|clazz
operator|=
name|Class
operator|.
name|forName
argument_list|(
name|type
operator|.
name|getInternalName
argument_list|()
operator|.
name|replace
argument_list|(
literal|'/'
argument_list|,
literal|'.'
argument_list|)
argument_list|)
expr_stmt|;
block|}
catch|catch
parameter_list|(
specifier|final
name|ClassNotFoundException
name|exception
parameter_list|)
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"The class ["
operator|+
name|type
operator|.
name|getInternalName
argument_list|()
operator|+
literal|"]"
operator|+
literal|" could not be found to create type ["
operator|+
name|name
operator|+
literal|"]."
argument_list|)
throw|;
block|}
name|sort
operator|=
name|Sort
operator|.
name|ARRAY
expr_stmt|;
block|}
elseif|else
if|if
condition|(
literal|"def"
operator|.
name|equals
argument_list|(
name|struct
operator|.
name|name
argument_list|)
condition|)
block|{
name|sort
operator|=
name|Sort
operator|.
name|DEF
expr_stmt|;
block|}
else|else
block|{
name|sort
operator|=
name|Sort
operator|.
name|OBJECT
expr_stmt|;
for|for
control|(
specifier|final
name|Sort
name|value
range|:
name|Sort
operator|.
name|values
argument_list|()
control|)
block|{
if|if
condition|(
name|value
operator|.
name|clazz
operator|==
literal|null
condition|)
block|{
continue|continue;
block|}
if|if
condition|(
name|value
operator|.
name|clazz
operator|.
name|equals
argument_list|(
name|struct
operator|.
name|clazz
argument_list|)
condition|)
block|{
name|sort
operator|=
name|value
expr_stmt|;
break|break;
block|}
block|}
block|}
return|return
operator|new
name|Type
argument_list|(
name|name
argument_list|,
name|dimensions
argument_list|,
name|struct
argument_list|,
name|clazz
argument_list|,
name|type
argument_list|,
name|sort
argument_list|)
return|;
block|}
DECL|method|getDimensions
specifier|private
name|int
name|getDimensions
parameter_list|(
specifier|final
name|String
name|name
parameter_list|)
block|{
name|int
name|dimensions
init|=
literal|0
decl_stmt|;
name|int
name|index
init|=
name|name
operator|.
name|indexOf
argument_list|(
literal|'['
argument_list|)
decl_stmt|;
if|if
condition|(
name|index
operator|!=
operator|-
literal|1
condition|)
block|{
specifier|final
name|int
name|length
init|=
name|name
operator|.
name|length
argument_list|()
decl_stmt|;
while|while
condition|(
name|index
operator|<
name|length
condition|)
block|{
if|if
condition|(
name|name
operator|.
name|charAt
argument_list|(
name|index
argument_list|)
operator|==
literal|'['
operator|&&
operator|++
name|index
operator|<
name|length
operator|&&
name|name
operator|.
name|charAt
argument_list|(
name|index
operator|++
argument_list|)
operator|==
literal|']'
condition|)
block|{
operator|++
name|dimensions
expr_stmt|;
block|}
else|else
block|{
throw|throw
operator|new
name|IllegalArgumentException
argument_list|(
literal|"Invalid array braces in canonical name ["
operator|+
name|name
operator|+
literal|"]."
argument_list|)
throw|;
block|}
block|}
block|}
return|return
name|dimensions
return|;
block|}
block|}
end_class

end_unit

